import{Q as v,z as N,W as w,y,h as o,o as e}from"./index-CSbus0M7.js";import{A as S}from"./arrow-left-Z97scQB5.js";import{S as C}from"./save-DfSwxlYO.js";import{S as I}from"./search-VEqTAmxH.js";import{C as P}from"./check-Br35spy6.js";const L=()=>{const{id:s}=v(),c=N(),{addStoreItem:u,updateStoreItem:h,getStoreItem:x,storeInventory:b}=w(),{user:i}=y(),[a,d]=o.useState({title:"",price:0,originalPrice:0,description:"",image:"",type:"bundle",items:[]}),[l,n]=o.useState([]),[m,p]=o.useState("");o.useEffect(()=>{if(s){const t=x(s);t&&t.type==="bundle"&&(d(t),n(t.items||[]))}},[s,x]);const g=b.filter(t=>l.includes(t.id)).reduce((t,r)=>t+r.price,0),f=t=>{l.includes(t)?n(l.filter(r=>r!==t)):n([...l,t])},j=()=>{const t={id:s||`b_${Date.now()}`,authorId:a.authorId||(i==null?void 0:i._id),title:a.title||"Untitled Bundle",price:Number(a.price),originalPrice:a.originalPrice?Number(a.originalPrice):void 0,type:"bundle",image:a.image||"https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?auto=format&fit=crop&q=80&w=1000",rating:a.rating||0,reviews:a.reviews||0,tags:["Bundle","Value"],description:a.description||"",features:["All-in-one package","Lifetime Updates"],items:l};s?h(s,t):u(t),c("/shop/dashboard")},k=b.filter(t=>t.id!==s&&t.type!=="bundle"&&t.title.toLowerCase().includes(m.toLowerCase()));return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 pb-20",children:[e.jsx("header",{className:"bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 sticky top-0 z-40",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>c("/shop/dashboard"),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors text-slate-500",children:e.jsx(S,{size:20})}),e.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white",children:s?"Edit Bundle":"Create New Bundle"})]}),e.jsxs("button",{onClick:j,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-600/20 flex items-center gap-2",children:[e.jsx(C,{size:18})," Save Bundle"]})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm space-y-6",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Bundle Details"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Bundle Title"}),e.jsx("input",{type:"text",value:a.title,onChange:t=>d({...a,title:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-xl outline-none focus:border-emerald-500 transition-colors dark:text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Price ($)"}),e.jsx("input",{type:"number",value:a.price,onChange:t=>d({...a,price:Number(t.target.value)}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-xl outline-none focus:border-emerald-500 transition-colors dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Original Price"}),e.jsx("input",{type:"number",value:a.originalPrice||"",onChange:t=>d({...a,originalPrice:Number(t.target.value)}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-xl outline-none focus:border-emerald-500 transition-colors dark:text-white",placeholder:"Optional"})]})]}),e.jsxs("div",{className:"flex flex-col justify-end pb-3",children:[e.jsx("div",{className:"text-xs font-bold uppercase text-slate-400 mb-1",children:"Calculated Total Value"}),e.jsxs("div",{className:"text-xl font-black text-slate-500 line-through",children:["$",g.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{rows:4,value:a.description,onChange:t=>d({...a,description:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-xl outline-none focus:border-emerald-500 transition-colors dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Cover Image URL"}),e.jsx("input",{type:"text",value:a.image,onChange:t=>d({...a,image:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-xl outline-none focus:border-emerald-500 transition-colors dark:text-white"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col h-[calc(100vh-140px)] sticky top-24",children:[e.jsxs("h2",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex justify-between items-center",children:[e.jsx("span",{children:"Included Items"}),e.jsxs("span",{className:"text-sm px-2 py-1 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 rounded-full",children:[l.length," Selected"]})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search inventory...",value:m,onChange:t=>p(t.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-lg outline-none focus:border-emerald-500 dark:text-white text-sm"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2 custom-scrollbar",children:k.map(t=>{const r=l.includes(t.id);return e.jsxs("div",{onClick:()=>f(t.id),className:`flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all ${r?"bg-emerald-50 dark:bg-emerald-900/10 border-emerald-500/50":"bg-slate-50 dark:bg-slate-950 border-slate-200 dark:border-slate-800 hover:border-emerald-500/30"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center transition-colors ${r?"bg-emerald-500 border-emerald-500":"border-slate-300 dark:border-slate-600"}`,children:r&&e.jsx(P,{size:12,className:"text-white"})}),e.jsx("div",{className:"w-10 h-10 bg-slate-200 dark:bg-slate-800 rounded-lg overflow-hidden shrink-0",children:e.jsx("img",{src:t.image,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white text-sm truncate",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[e.jsx("span",{className:"capitalize",children:t.type}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["$",t.price]})]})]})]},t.id)})})]})]})]})};export{L as default};
