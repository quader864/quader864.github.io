import{w as S,h as l,o as e,A as is,q as ds,K as m,y as ns,X as ie,z as Ls,U as Ze,N as Vs,O as Us,L as le,t as Ms,V as Os}from"./index-J9iKmyaX.js";import{b as z}from"./blog-DMsYJa6l.js";import{U as $s,u as W,v as L}from"./user-wt3rkyvH.js";import{N as Ds,C as Es,S as Fs,P as Ne}from"./SafeContentRenderer-BFRxj0Ug.js";import{C as os}from"./circle-alert-CS6LTxvk.js";import{L as Ce}from"./lock-hQDknS9k.js";import{S as cs}from"./save-BbjUSPep.js";import{E as Ts}from"./eye-off-xDGsWCKg.js";import{E as xs}from"./eye-CYFNWAbx.js";import{T as es}from"./triangle-alert-lSeIngq9.js";import{H as ss}from"./heart-DsCRwS9D.js";import{S as ye}from"./shield-vt29cwSO.js";import{A as ts}from"./arrow-left-7hwDlbql.js";import{C as ve}from"./clock-BQzd1guy.js";import{T as Bs}from"./trash-2-DC8Uw3Hh.js";import{C as U}from"./circle-check-big-DzCSpaNm.js";import{U as Hs}from"./upload-DyjfFh0E.js";import{C as ke}from"./check-DWc0Pzcw.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],as=S("badge-check",Gs);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Js=S("camera",Ys);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Qs=S("file-check",Ks);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ws=S("file-exclamation-point",qs);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],rs=S("file-text",Xs);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],et=S("hash",Zs);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ls=S("map-pin",st);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],at=S("phone",tt);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],lt=S("shield-check",rt),we=({isOpen:t,onClose:f,onConfirm:w,isProcessing:b=!1})=>{const[p,o]=l.useState("");return t?e.jsx(is,{children:e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:b?void 0:f}),e.jsxs(ds.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-2xl p-6 max-w-sm w-full border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-full",children:e.jsx(os,{size:24})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Reject Post"})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-4 text-sm",children:"Please provide a reason for rejection. This will be visible to the author."}),e.jsx("textarea",{value:p,onChange:v=>o(v.target.value),disabled:b,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-red-500 outline-none text-slate-900 dark:text-white mb-6 resize-none disabled:opacity-50",rows:3,placeholder:"Reason for rejection..."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:f,disabled:b,className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg font-medium transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:()=>w(p),disabled:!p.trim()||b,className:"px-6 py-2 bg-red-600 text-white hover:bg-red-700 rounded-lg font-medium transition-colors shadow-lg shadow-red-600/20 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:b?e.jsx(m,{size:18,className:"animate-spin"}):"Reject Post"})]})]})]})}):null},Pe=({label:t,value:f,onChange:w,show:b,toggleShow:p})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ce,{className:"h-5 w-5 text-slate-400"})}),e.jsx("input",{type:b?"text":"password",value:f,onChange:w,className:"block w-full pl-10 pr-10 py-2.5 bg-slate-50 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-accent-500 focus:border-accent-500 dark:text-white text-slate-900 transition-colors",placeholder:"••••••••"}),e.jsx("button",{type:"button",onClick:p,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:b?e.jsx(Ts,{className:"h-5 w-5"}):e.jsx(xs,{className:"h-5 w-5"})})]})]}),it=({isOpen:t,onClose:f,onSuccess:w})=>{const{changePassword:b}=ns(),[p,o]=l.useState(""),[v,M]=l.useState(""),[D,X]=l.useState(""),[E,Z]=l.useState(!1),[V,de]=l.useState(!1),[F,Ie]=l.useState(!1),[T,P]=l.useState(""),[B,H]=l.useState(!1);if(!t)return null;const G=async g=>{if(g.preventDefault(),P(""),console.log("[ChangePassword] Submitting form..."),v.length<8){P("New password must be at least 8 characters long.");return}if(v!==D){P("New passwords do not match.");return}if(p===v){P("New password must be different from current password.");return}H(!0);try{console.log("[ChangePassword] Calling changePassword API...");const C=await b(p,v);console.log("[ChangePassword] API Result:",C),H(!1),C.success?(w(),f(),o(""),M(""),X("")):(console.error("[ChangePassword] API Error:",C.message),P(C.message))}catch(C){console.error("[ChangePassword] Unexpected error:",C),H(!1),P("An unexpected error occurred.")}};return e.jsx(is,{children:e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:f}),e.jsxs(ds.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-2xl p-6 max-w-md w-full border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Ce,{size:20,className:"text-accent-600"})," Change Password"]}),e.jsx("button",{onClick:f,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors",children:e.jsx(ie,{size:20})})]}),T&&e.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 flex items-start gap-3",children:[e.jsx(os,{className:"text-red-600 dark:text-red-400 shrink-0",size:20}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:T})]}),e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[e.jsx(Pe,{label:"Current Password",value:p,onChange:g=>o(g.target.value),show:E,toggleShow:()=>Z(!E)}),e.jsx(Pe,{label:"New Password",value:v,onChange:g=>M(g.target.value),show:V,toggleShow:()=>de(!V)}),e.jsx(Pe,{label:"Confirm New Password",value:D,onChange:g=>X(g.target.value),show:F,toggleShow:()=>Ie(!F)}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg font-medium transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:B,className:"px-6 py-2 bg-accent-600 text-white hover:bg-accent-700 rounded-lg font-medium transition-colors shadow-lg shadow-accent-600/20 disabled:opacity-70 disabled:cursor-not-allowed flex items-center gap-2",children:[B?e.jsx(m,{className:"animate-spin",size:18}):e.jsx(cs,{size:18}),"Update Password"]})]})]})]})]})})},Ct=()=>{var Ke,Qe,qe,We;const{user:t,logout:f,isLoading:w,checkAuth:b}=ns(),p=Ls(),[o,v]=l.useState("overview"),[M,D]=l.useState([]),[X,E]=l.useState(!1),[Z,V]=l.useState([]),[de,F]=l.useState(!1),[Ie,T]=l.useState(null),[P,B]=l.useState([]),[H,G]=l.useState(!1),[g,C]=l.useState([]),[_e,ze]=l.useState(!1),[k,ne]=l.useState(null),[Y,Se]=l.useState({public:[],pending:[],rejected:[]}),[dt,Ae]=l.useState(!1),[d,Re]=l.useState(null),[Le,ee]=l.useState(!1),[ms,Ve]=l.useState(!1),[Ue,Me]=l.useState(""),[J,Oe]=l.useState(null),[$e,oe]=l.useState(null),[De,hs]=l.useState([]),[O,K]=l.useState(null),[bs,Ee]=l.useState(!1),[ps,se]=l.useState(!1),[j,A]=l.useState(null),[ce,Fe]=l.useState({show:!1,type:"success",message:""}),[Q,N]=l.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),[te,ae]=l.useState({isOpen:!1,postId:null}),[xe,me]=l.useState({isOpen:!1,userId:null}),[q,he]=l.useState({isOpen:!1,userId:null}),[us,Te]=l.useState(!1),[be,re]=l.useState(!1),[u,R]=l.useState({}),Be=l.useRef(null),[c,x]=l.useState({}),n=(s,a)=>{Fe({show:!0,type:s,message:a})};l.useEffect(()=>{!w&&!t&&p("/auth/login")},[w,t,p]);const fs=s=>{const a=s.verification;if(!a)return{status:Os.UNVERIFIED,emailVerified:!1,identityVerified:!1,identityStatus:"unverified"};let r="unverified";return a.identity.verified?r="verified":a.rejectionReason&&!a.identity.documentKey&&!a.identity.documentUrl||a.rejectionReason?r="rejected":(a.identity.documentKey||a.identity.documentUrl)&&(r="pending"),{status:a.overall,emailVerified:a.email.verified,identityVerified:a.identity.verified,identityStatus:r,rejectionReason:a.rejectionReason}};l.useEffect(()=>{if(t&&t.verification&&(Re(fs(t)),t.verificationPreview)){if(typeof t.verificationPreview=="string")oe(t.verificationPreview);else if(typeof t.verificationPreview=="object"){const s=t.verificationPreview;oe(s.presignedUrl||s.documentUrl||null)}}t&&!be&&R({username:t.username||"",phoneNumber:t.phoneNumber||"",passportId:t.passportId||"",address:t.address||"",country:t.country||"",city:t.city||""})},[t]);const gs=async()=>{if((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="moderator"){F(!0),T(null);try{const s=await z.getModerationPosts();V(s)}catch(s){console.error("Error fetching moderation posts:",s),T(s.message||"Failed to load"),n("error","Failed to fetch moderation queue")}finally{F(!1)}}},pe=async()=>{ee(!0);try{const s=await L.getStatus();Re(s)}catch(s){console.error("Fetch verification status failed:",s)}finally{ee(!1)}},ue=async()=>{ee(!0);try{const s=await L.getPendingRequests();hs(s)}catch(s){console.error("[Dashboard] Error fetching verifications:",s)}finally{ee(!1)}},He=async()=>{ze(!0);try{const s=await W.getAll();C(s)}catch(s){console.error("Error fetching users",s)}finally{ze(!1)}};l.useEffect(()=>{(o==="blog"||o==="overview")&&t&&(E(!0),z.getMyPosts(t._id||"").then(s=>{D(s),E(!1)})),o==="moderation"&&((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="moderator")&&gs(),(o==="users"||o==="admin_profiles")&&(t==null?void 0:t.role)==="admin"&&He(),o==="liked"&&t&&(G(!0),z.getAllPublic().then(s=>{const a=String(t._id||""),r=String(t.user_id||""),i=new Set;Array.isArray(t.likedPosts)&&t.likedPosts.forEach(y=>{const $=typeof y=="object"&&y?y._id:y;$&&i.add(String($))});const _=s.filter(y=>{const $=Array.isArray(y.likedBy)&&y.likedBy.some(h=>{const je=typeof h=="object"&&h?h._id||h.user_id:h,Xe=String(je);return a&&Xe===a||r&&Xe===r}),ge=i.has(String(y._id));return $||ge});B(_),G(!1)}).catch(s=>{console.error("Failed to fetch liked posts",s),G(!1)})),(o==="verification"||o==="overview")&&t&&pe(),o==="admin_verifications"&&(t==null?void 0:t.role)==="admin"&&ue(),o!=="users"&&ne(null)},[o,t]);const js=async()=>{x(s=>({...s,otp:!0}));try{const s=await L.sendEmailOtp();s.success&&(Ve(!0),n("success",s.message))}catch(s){n("error",s.message)}finally{x(s=>({...s,otp:!1}))}},Ns=async()=>{x(s=>({...s,otp_confirm:!0}));try{const s=await L.confirmEmailOtp(Ue);s.success&&(n("success",s.message),pe(),Ve(!1),Me(""))}catch(s){n("error",s.message)}finally{x(s=>({...s,otp_confirm:!1}))}},ys=s=>{if(s.target.files&&s.target.files[0]){const a=s.target.files[0];if(a.size>5*1024*1024){n("error","File size exceeds 5MB limit.");return}if(!["image/jpeg","image/png"].includes(a.type)){n("error","Only JPG and PNG allowed.");return}Oe(a),oe(URL.createObjectURL(a))}},vs=async()=>{if(J){x(s=>({...s,upload:!0}));try{const s=await L.uploadIdentity(J);s.success&&(n("success",s.message),Oe(null),pe())}catch(s){n("error",s.message)}finally{x(s=>({...s,upload:!1}))}}},ks=async s=>{const a=s.userId||s._id;if(!a){n("error","Invalid User ID");return}x(r=>({...r,[`view-${a}`]:!0})),Ee(!1),se(!0);try{const r=await L.getPresignedUrl(a);K({req:s,url:r.url,userId:a})}catch(r){n("error",r.message),se(!1)}finally{x(r=>({...r,[`view-${a}`]:!1}))}},ws=async s=>{x(a=>({...a,approve_id:!0}));try{(await L.approveIdentity(s)).success&&(n("success","Identity Approved"),K(null),ue())}catch(a){n("error",a.message)}finally{x(a=>({...a,approve_id:!1}))}},Ps=async(s,a)=>{x(r=>({...r,reject_id:!0}));try{(await L.rejectIdentity(s,a)).success&&(n("success","Identity Rejected"),K(null),me({isOpen:!1,userId:null}),ue())}catch(r){n("error",r.message)}finally{x(r=>({...r,reject_id:!1}))}},Cs=async s=>{if(s.target.files&&s.target.files[0]){const a=s.target.files[0];x(r=>({...r,avatar:!0}));try{const r=await W.uploadProfilePic(a);r.success&&(n("success",r.message),await b())}catch(r){n("error",r.message)}finally{x(r=>({...r,avatar:!1}))}}},Is=async s=>{s.preventDefault(),x(a=>({...a,profile_update:!0}));try{(await W.updateProfile(u)).success&&(n("success","Profile updated successfully"),re(!1),await b())}catch(a){let r=a.message;const i=r.toLowerCase();(i.includes("duplicate")||i.includes("already exists")||i.includes("e11000"))&&(i.includes("username")?r="Username is already taken. Please choose a different one.":i.includes("phone")?r="Phone number is already associated with another account.":i.includes("passport")?r="Passport ID is already in use.":i.includes("email")?r="Email is already in use.":r="This information is already in use by another account."),n("error",r)}finally{x(a=>({...a,profile_update:!1}))}},Ge=async(s,a,r)=>{x(i=>({...i,[`prof_${s}`]:!0}));try{(await W.verifyProfile(s,a,r)).success&&(n("success",`Profile ${a}`),he({isOpen:!1,userId:null}),He())}catch(i){n("error",i.message)}finally{x(i=>({...i,[`prof_${s}`]:!1}))}},Ye=async s=>{x(a=>({...a,[s]:!0}));try{const a=await z.approve(s);a.success?(V(r=>r.filter(i=>i._id!==s)),k&&fe(k),j&&j._id===s&&A(null),n("success",a.message)):n("error","Action failed")}catch{n("error","An error occurred")}finally{x(a=>({...a,[s]:!1}))}},_s=async(s,a)=>{x(r=>({...r,[s]:!0}));try{const r=await z.reject(s,a);r.success?(V(i=>i.filter(_=>_._id!==s)),k&&fe(k),j&&j._id===s&&A(null),ae({isOpen:!1,postId:null}),n("success",r.message)):n("error","Action failed")}catch{n("error","An error occurred")}finally{x(r=>({...r,[s]:!1}))}},zs=s=>{N({isOpen:!0,title:"Delete Post",message:"Are you sure you want to delete this post? This action cannot be undone.",isLoading:!1,onConfirm:async()=>{N(a=>({...a,isLoading:!0})),x(a=>({...a,[s]:!0}));try{const a=await z.delete(s);a.success?(n("success",a.message),D(r=>r.filter(i=>i._id!==s)),V(r=>r.filter(i=>i._id!==s)),B(r=>r.filter(i=>i._id!==s)),k&&Se(r=>({...r,public:r.public.filter(i=>i._id!==s),pending:r.pending.filter(i=>i._id!==s),rejected:r.rejected.filter(i=>i._id!==s)})),N(r=>({...r,isOpen:!1}))):(n("error",a.message),N(r=>({...r,isLoading:!1})))}catch{n("error","Failed to delete post"),N(r=>({...r,isLoading:!1}))}finally{x(a=>({...a,[s]:!1}))}}})},Je=async s=>{if(A(s),!s.content&&!s.contentRaw)try{const a=await z.getById(s._id);a&&A(a)}catch(a){console.error("Failed to fetch full post details",a)}},Ss=(s,a)=>{N({isOpen:!0,title:"Change User Role",message:`Are you sure you want to change this user's role to ${a}?`,isLoading:!1,onConfirm:async()=>{N(r=>({...r,isLoading:!0})),x(r=>({...r,[`role-${s}`]:!0}));try{const r=await W.updateRole(s,a);r.success?(n("success",r.message),C(i=>i.map(_=>_._id===s?{..._,role:a}:_)),N(i=>({...i,isOpen:!1}))):(n("error",r.message),N(i=>({...i,isLoading:!1})))}catch(r){n("error",r.message||"Failed to update role"),N(i=>({...i,isLoading:!1}))}finally{x(r=>({...r,[`role-${s}`]:!1}))}}})},fe=async s=>{ne(s),Ae(!0);try{const[a,r]=await Promise.all([z.getAllPublic(),z.getModerationPosts()]),i=h=>{const je=typeof h.authorId=="object"&&h.authorId?h.authorId._id:h.authorId;return String(je)===String(s._id)},_=a.filter(i),y=r.filter(i),$=y.filter(h=>h.visibility==="pending"),ge=y.filter(h=>h.visibility==="rejected");Se({public:_,pending:$,rejected:ge})}catch(a){console.error("Error inspecting user",a),n("error","Failed to load user posts")}finally{Ae(!1)}},As=()=>Le?e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:e.jsx(ye,{size:20})}),e.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Account Status"})]}),e.jsxs("div",{className:"space-y-4 flex-1 animate-pulse",children:[e.jsx("div",{className:"h-12 bg-slate-100 dark:bg-slate-800/50 rounded-lg"}),e.jsx("div",{className:"h-12 bg-slate-100 dark:bg-slate-800/50 rounded-lg"})]})]}):e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:e.jsx(ye,{size:20})}),e.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Account Status"})]}),e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Level 1 (Email)"}),d!=null&&d.emailVerified?e.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-bold text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded-full",children:[e.jsx(U,{size:12})," Verified"]}):e.jsx("span",{className:"flex items-center gap-1.5 text-xs font-bold text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full",children:"Unverified"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Level 2 (Identity)"}),d!=null&&d.identityVerified||(d==null?void 0:d.status)==="FULLY_VERIFIED"?e.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-bold text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded-full",children:[e.jsx(U,{size:12})," Verified"]}):(d==null?void 0:d.identityStatus)==="pending"||(d==null?void 0:d.status)==="PENDING"?e.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-bold text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/20 px-2 py-1 rounded-full",children:[e.jsx(ve,{size:12})," Pending"]}):e.jsx("span",{className:"flex items-center gap-1.5 text-xs font-bold text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full",children:"Unverified"})]})]})]}),Rs=async()=>{await f(),p("/")},I=({id:s,label:a,icon:r})=>e.jsxs("button",{onClick:()=>v(s),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ${o===s?"bg-accent-600 text-white shadow-md shadow-accent-600/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx(r,{size:18}),a]});return w?e.jsx("div",{className:"min-h-screen pt-24 flex items-center justify-center bg-slate-50 dark:bg-slate-950",children:e.jsxs("div",{className:"text-slate-600 dark:text-slate-400 font-medium animate-pulse flex items-center gap-2",children:[e.jsx(m,{className:"animate-spin"})," Loading dashboard..."]})}):t?e.jsxs("div",{className:"min-h-screen pt-24 pb-12 bg-slate-50 dark:bg-slate-950 px-4 sm:px-6 lg:px-8 transition-colors duration-500",children:[e.jsx(Ds,{show:ce.show,type:ce.type,message:ce.message,onClose:()=>Fe(s=>({...s,show:!1}))}),e.jsx(Es,{isOpen:Q.isOpen,title:Q.title,message:Q.message,isLoading:Q.isLoading,onClose:()=>N(s=>({...s,isOpen:!1})),onConfirm:Q.onConfirm}),e.jsx(we,{isOpen:te.isOpen,isProcessing:c[te.postId||""],onClose:()=>ae(s=>({...s,isOpen:!1})),onConfirm:s=>{te.postId&&_s(te.postId,s)}}),e.jsx(we,{isOpen:xe.isOpen,isProcessing:c.reject_id,onClose:()=>me(s=>({...s,isOpen:!1})),onConfirm:s=>{xe.userId&&Ps(xe.userId,s)}}),e.jsx(we,{isOpen:q.isOpen,isProcessing:q.userId?c[`prof_${q.userId}`]:!1,onClose:()=>he(s=>({...s,isOpen:!1})),onConfirm:s=>{q.userId&&Ge(q.userId,"rejected",s)}}),e.jsx(it,{isOpen:us,onClose:()=>Te(!1),onSuccess:()=>n("success","Password updated successfully")}),j&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/80 backdrop-blur-sm",onClick:()=>A(null)}),e.jsxs("div",{className:"relative bg-white dark:bg-slate-900 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-lg dark:text-white",children:["Reviewing: ",j.title]}),e.jsx("button",{onClick:()=>A(null),children:e.jsx(ie,{size:20,className:"text-slate-500"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50 dark:bg-slate-950",children:e.jsx(Fs,{content:j.content||j.contentRaw,title:j.title})}),e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{ae({isOpen:!0,postId:j._id}),A(null)},className:"px-4 py-2 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded-lg font-bold",children:"Reject"}),e.jsx("button",{onClick:()=>{Ye(j._id),A(null)},className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700",children:"Approve & Publish"})]})]})]}),O&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/90 backdrop-blur-md",onClick:()=>K(null)}),e.jsxs("div",{className:"relative bg-white dark:bg-slate-900 rounded-2xl w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center bg-slate-50 dark:bg-slate-900",children:[e.jsxs("h3",{className:"font-bold text-lg dark:text-white flex items-center gap-2",children:[e.jsx(Ze,{size:20,className:"text-emerald-500"}),"Review Identity: ",O.req.userEmail]}),e.jsx("button",{onClick:()=>K(null),children:e.jsx(ie,{size:20,className:"text-slate-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-100 dark:bg-black flex items-center justify-center",children:[ps&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/50 dark:bg-black/50 z-10",children:e.jsx(m,{className:"animate-spin text-emerald-500",size:32})}),bs?e.jsxs("div",{className:"text-center p-8 text-red-500 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-200 dark:border-red-900",children:[e.jsx(es,{size:48,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Failed to load document image."}),e.jsx("p",{className:"text-xs mt-2 opacity-70",children:"The URL may have expired or is invalid."})]}):e.jsx("img",{src:O.url,alt:"ID Document",className:"max-w-full max-h-[60vh] object-contain rounded-lg shadow-lg border border-slate-200 dark:border-slate-800",onLoad:()=>se(!1),onError:()=>{Ee(!0),se(!1)}})]}),e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex justify-between items-center",children:[e.jsxs("div",{className:"text-xs text-slate-500",children:["User ID: ",e.jsx("span",{className:"font-mono",children:O.userId})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>me({isOpen:!0,userId:O.userId}),disabled:c.reject_id,className:"px-4 py-2 bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 rounded-lg font-bold hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:"Reject"}),e.jsxs("button",{onClick:()=>ws(O.userId),disabled:c.approve_id,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-600/20 disabled:opacity-70 disabled:cursor-wait flex items-center gap-2",children:[c.approve_id&&e.jsx(m,{size:16,className:"animate-spin"}),"Approve Identity"]})]})]})]})]}),e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row gap-8",children:[e.jsx("aside",{className:"w-full md:w-64 shrink-0",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 sticky top-24",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-100 dark:bg-accent-900/30 text-accent-600 dark:text-accent-400 flex items-center justify-center font-bold text-xl overflow-hidden relative group shrink-0",children:t.profilePic?e.jsx("img",{src:t.profilePic,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("span",{children:t.firstName[0]})}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white truncate",title:`${t.firstName} ${t.lastName}`,children:[t.firstName," ",t.lastName]}),e.jsx("p",{className:"text-xs text-slate-500 truncate",title:t.username?`@${t.username}`:t.email,children:t.username?`@${t.username}`:t.email})]})]}),e.jsxs("nav",{className:"space-y-1",children:[e.jsx(I,{id:"overview",label:"Overview",icon:Vs}),e.jsx(I,{id:"profile",label:"My Profile",icon:Ze}),e.jsx(I,{id:"blog",label:"My Posts",icon:rs}),e.jsx(I,{id:"liked",label:"Liked Posts",icon:ss}),e.jsx(I,{id:"verification",label:"Verification",icon:lt}),(t.role==="admin"||t.role==="moderator")&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-4 border-t border-slate-100 dark:border-slate-800"}),e.jsx("h4",{className:"px-4 text-xs font-bold text-slate-400 uppercase mb-2",children:"Staff Area"}),e.jsx(I,{id:"moderation",label:"Moderation Queue",icon:ye})]}),t.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(I,{id:"admin_verifications",label:"ID Verification",icon:Qs}),e.jsx(I,{id:"admin_profiles",label:"Profile Reviews",icon:as}),e.jsx(I,{id:"users",label:"User Management",icon:$s})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 dark:border-slate-800",children:e.jsxs("button",{onClick:Rs,className:"w-full flex items-center gap-3 px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:[e.jsx(Us,{size:18})," Sign Out"]})})]})}),e.jsxs("main",{className:"flex-1 min-w-0",children:[o==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Dashboard Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[As(),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded-lg",children:e.jsx(rs,{size:20})}),e.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"My Contributions"})]}),e.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-1",children:M.length}),e.jsx("p",{className:"text-sm text-slate-500",children:"Total posts created"}),e.jsxs(le,{to:"/blog/editor",className:"mt-4 inline-flex items-center text-sm text-accent-600 hover:underline",children:["Write new post ",e.jsx(ts,{className:"rotate-180 ml-1",size:14})]})]})]}),!t.username&&!t.phoneNumber&&e.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl p-6 shadow-lg text-white flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:"Complete your Profile"}),e.jsx("p",{className:"text-indigo-100 text-sm",children:"Add your username and details to get verified faster."})]}),e.jsx("button",{onClick:()=>{v("profile"),re(!0)},className:"px-6 py-2 bg-white text-indigo-600 font-bold rounded-lg hover:bg-indigo-50 transition-colors shadow-md whitespace-nowrap",children:"Update Profile"})]})]}),o==="profile"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"My Profile"}),!be&&e.jsxs("button",{onClick:()=>re(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-lg font-medium hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:[e.jsx(Ne,{size:16})," Edit Profile"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-8 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 mb-8 pb-8 border-b border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-accent-100 dark:bg-accent-900/30 text-accent-600 dark:text-accent-400 flex items-center justify-center font-bold text-4xl border-4 border-slate-50 dark:border-slate-800 overflow-hidden",children:t.profilePic?e.jsx("img",{src:t.profilePic,alt:"Profile",className:"w-full h-full object-cover"}):t.firstName[0]}),e.jsx("input",{type:"file",ref:Be,className:"hidden",accept:"image/png, image/jpeg",onChange:Cs}),e.jsx("button",{onClick:()=>{var s;return(s=Be.current)==null?void 0:s.click()},disabled:c.avatar,className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer disabled:cursor-wait",children:c.avatar?e.jsx(m,{className:"animate-spin text-white"}):e.jsx(Js,{className:"text-white",size:24})})]}),e.jsxs("div",{className:"text-center md:text-left space-y-2 flex-1",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 justify-center md:justify-start",children:[e.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[t.firstName," ",t.lastName]}),((Ke=t.profileVerification)==null?void 0:Ke.status)==="verified"&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-xs font-bold rounded-full border border-blue-200 dark:border-blue-800",children:[e.jsx(as,{size:12})," Verified Profile"]}),((Qe=t.profileVerification)==null?void 0:Qe.status)==="pending"&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 text-xs font-bold rounded-full border border-yellow-200 dark:border-yellow-800",children:[e.jsx(ve,{size:12})," Pending Review"]}),((qe=t.profileVerification)==null?void 0:qe.status)==="rejected"&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 text-xs font-bold rounded-full border border-red-200 dark:border-red-800",title:t.profileVerification.rejectionReason||"Profile rejected",children:[e.jsx(ie,{size:12})," Rejected"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 text-sm text-slate-500 dark:text-slate-400",children:[t.username&&e.jsxs("span",{className:"text-accent-600 dark:text-accent-400 font-medium",children:["@",t.username]}),t.city&&t.country&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ls,{size:14})," ",t.city,", ",t.country]})]}),((We=t.profileVerification)==null?void 0:We.status)==="rejected"&&t.profileVerification.rejectionReason&&e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 rounded-lg text-sm text-red-600 dark:text-red-400 mt-2 text-left",children:[e.jsx("strong",{children:"Rejection Reason:"})," ",t.profileVerification.rejectionReason]})]})]}),be?e.jsxs("form",{onSubmit:Is,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Username"}),e.jsx("input",{type:"text",value:u.username||"",onChange:s=>R({...u,username:s.target.value}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg outline-none focus:ring-2 focus:ring-accent-500",placeholder:"@username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Phone Number"}),e.jsx("input",{type:"text",value:u.phoneNumber||"",onChange:s=>R({...u,phoneNumber:s.target.value}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg outline-none focus:ring-2 focus:ring-accent-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Passport ID"}),e.jsx("input",{type:"text",value:u.passportId||"",onChange:s=>R({...u,passportId:s.target.value}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg outline-none focus:ring-2 focus:ring-accent-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Address"}),e.jsx("input",{type:"text",value:u.address||"",onChange:s=>R({...u,address:s.target.value}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg outline-none focus:ring-2 focus:ring-accent-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Country"}),e.jsx("input",{type:"text",value:u.country||"",onChange:s=>R({...u,country:s.target.value}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg outline-none focus:ring-2 focus:ring-accent-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"City"}),e.jsx("input",{type:"text",value:u.city||"",onChange:s=>R({...u,city:s.target.value}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg outline-none focus:ring-2 focus:ring-accent-500"})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-200 dark:border-yellow-900/30 rounded-lg text-sm text-yellow-800 dark:text-yellow-400 flex gap-3",children:[e.jsx(Ws,{className:"shrink-0",size:20}),e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"}),' Updating sensitive profile information (Passport ID, Address, Phone) will require re-verification by our administrators. Your profile status will be set to "Pending Review".']})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100 dark:border-slate-800",children:[e.jsx("button",{type:"button",onClick:()=>{re(!1),R({...t})},className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg font-medium transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:c.profile_update,className:"px-6 py-2 bg-accent-600 text-white hover:bg-accent-700 rounded-lg font-medium transition-colors shadow-lg shadow-accent-600/20 disabled:opacity-70 disabled:cursor-wait flex items-center gap-2",children:[c.profile_update?e.jsx(m,{className:"animate-spin",size:18}):e.jsx(cs,{size:18}),"Save Changes"]})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-950 p-6 rounded-xl border border-slate-100 dark:border-slate-800 space-y-4",children:[e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white border-b border-slate-200 dark:border-slate-800 pb-2 mb-4",children:"Contact Info"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ms,{className:"text-slate-400 mt-0.5",size:18}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs text-slate-500 uppercase font-bold",children:"Email"}),e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:t.email})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(at,{className:"text-slate-400 mt-0.5",size:18}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs text-slate-500 uppercase font-bold",children:"Phone"}),e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:t.phoneNumber||"Not set"})]})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-950 p-6 rounded-xl border border-slate-100 dark:border-slate-800 space-y-4",children:[e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white border-b border-slate-200 dark:border-slate-800 pb-2 mb-4",children:"Identity & Location"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ls,{className:"text-slate-400 mt-0.5",size:18}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs text-slate-500 uppercase font-bold",children:"Address"}),e.jsxs("span",{className:"text-slate-700 dark:text-slate-300",children:[t.address?t.address:"Not set",t.city&&`, ${t.city}`,t.country&&`, ${t.country}`]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(et,{className:"text-slate-400 mt-0.5",size:18}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs text-slate-500 uppercase font-bold",children:"Passport / National ID"}),e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:t.passportId?`${t.passportId.substring(0,2)}${"*".repeat(Math.max(0,t.passportId.length-4))}${t.passportId.slice(-2)}`:"Not set"})]})]})]})]}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-100 dark:border-slate-800",children:[e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white mb-4",children:"Security Settings"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between p-4 bg-slate-50 dark:bg-slate-950 rounded-lg border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-0",children:[e.jsx("div",{className:"p-2 bg-white dark:bg-slate-900 rounded-full border border-slate-200 dark:border-slate-800 text-slate-500",children:e.jsx(Ce,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:"Password"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Last changed: Never"})]})]}),e.jsx("button",{onClick:()=>Te(!0),className:"px-4 py-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-lg text-sm font-medium hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors shadow-sm",children:"Change Password"})]})]})]})]}),o==="blog"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"My Posts"}),e.jsxs(le,{to:"/blog/editor",className:"px-4 py-2 bg-accent-600 text-white rounded-lg hover:bg-accent-700 transition-colors text-sm font-medium flex items-center gap-2",children:[e.jsx(Ne,{size:16})," New Post"]})]}),X?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(m,{className:"animate-spin text-accent-600"})}):M.length===0?e.jsx("div",{className:"text-center py-12 bg-white dark:bg-slate-900 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:e.jsx("p",{className:"text-slate-500",children:"You haven't written any posts yet."})}):e.jsx("div",{className:"space-y-4",children:M.map(s=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:s.title}),e.jsxs("div",{className:"flex gap-2 text-xs mt-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded capitalize ${s.visibility==="public"?"bg-green-100 text-green-700":s.visibility==="pending"?"bg-yellow-100 text-yellow-700":s.visibility==="rejected"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-600"}`,children:s.visibility}),e.jsx("span",{className:"text-slate-400",children:new Date(s.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(le,{to:`/blog/editor/${s._id}`,className:"p-2 text-slate-500 hover:text-accent-600 hover:bg-slate-100 dark:hover:bg-slate-800 rounded transition-colors",children:e.jsx(Ne,{size:18})}),e.jsx("button",{onClick:()=>zs(s._id),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",children:e.jsx(Bs,{size:18})})]})]},s._id))})]}),o==="verification"&&e.jsxs("div",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Account Verification"}),e.jsxs("div",{className:`bg-white dark:bg-slate-900 p-6 rounded-xl border ${d!=null&&d.emailVerified?"border-green-200 dark:border-green-900/50":"border-slate-200 dark:border-slate-800"} relative overflow-hidden`,children:[(d==null?void 0:d.emailVerified)&&e.jsx("div",{className:"absolute top-0 right-0 p-4",children:e.jsx(U,{className:"text-green-500",size:24})}),e.jsx("h3",{className:"font-bold text-lg mb-2 dark:text-white",children:"Level 1: Email Verification"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:"Required for basic commenting and posting."}),d!=null&&d.emailVerified?e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-sm font-bold",children:[e.jsx(U,{size:16})," Verified"]}):e.jsx("div",{className:"space-y-4 max-w-sm",children:ms?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter OTP",className:"flex-1 px-4 py-2 bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-lg outline-none",value:Ue,onChange:s=>Me(s.target.value)}),e.jsx("button",{onClick:Ns,disabled:c.otp_confirm,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:c.otp_confirm?e.jsx(m,{className:"animate-spin"}):"Confirm"})]}):e.jsx("button",{onClick:js,disabled:c.otp,className:"px-4 py-2 bg-accent-600 text-white rounded-lg hover:bg-accent-700 transition-colors disabled:opacity-50",children:c.otp?e.jsx(m,{className:"animate-spin"}):"Send Verification Code"})})]}),e.jsxs("div",{className:`bg-white dark:bg-slate-900 p-6 rounded-xl border ${d!=null&&d.identityVerified?"border-green-200 dark:border-green-900/50":"border-slate-200 dark:border-slate-800"} relative overflow-hidden`,children:[(d==null?void 0:d.identityVerified)&&e.jsx("div",{className:"absolute top-0 right-0 p-4",children:e.jsx(U,{className:"text-green-500",size:24})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-bold text-lg dark:text-white",children:"Level 2: Identity Verification"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Required for advanced features and badge."})]}),d!=null&&d.identityVerified?e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-sm font-bold",children:[e.jsx(U,{size:16})," Verified"]}):(d==null?void 0:d.identityStatus)==="pending"?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-100 dark:border-yellow-900/30 rounded-lg text-yellow-800 dark:text-yellow-400 flex items-start gap-3",children:[e.jsx(ve,{className:"shrink-0 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm",children:"Under Review"}),e.jsx("p",{className:"text-xs mt-1 opacity-90",children:"Your document has been uploaded and is waiting for administrator approval."})]})]}),$e&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 mb-2",children:"Submitted Document:"}),e.jsx("img",{src:$e,alt:"Uploaded Doc",className:"h-32 rounded border border-slate-200 dark:border-slate-700"})]})]}):e.jsxs("div",{className:"space-y-4 max-w-sm",children:[(d==null?void 0:d.rejectionReason)&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-900/30 rounded-lg text-red-800 dark:text-red-400 mb-4",children:[e.jsxs("p",{className:"font-bold text-sm flex items-center gap-2",children:[e.jsx(es,{size:16})," Application Rejected"]}),e.jsxs("p",{className:"text-xs mt-1",children:["Reason: ",d.rejectionReason]})]}),e.jsxs("div",{className:"border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-xl p-6 text-center hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors relative",children:[e.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:"image/jpeg,image/png",onChange:ys}),e.jsx(Hs,{className:"mx-auto text-slate-400 mb-2",size:24}),e.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:J?J.name:"Click to upload ID (JPG/PNG)"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Max 5MB"})]}),J&&e.jsx("button",{onClick:vs,disabled:c.upload,className:"w-full px-4 py-2 bg-accent-600 text-white rounded-lg hover:bg-accent-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:c.upload?e.jsx(m,{className:"animate-spin",size:18}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{size:18})," Submit Document"]})})]})]})]}),o==="moderation"&&((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="moderator")&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Moderation Queue"}),de?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(m,{className:"animate-spin text-accent-600"})}):Z.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-900 rounded-xl border border-dashed border-slate-200 dark:border-slate-800 text-slate-500",children:[e.jsx(U,{className:"mx-auto mb-2 text-green-500",size:32}),e.jsx("p",{children:"All caught up! No pending posts."})]}):e.jsx("div",{className:"space-y-4",children:Z.map(s=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:s.title}),e.jsxs("p",{className:"text-sm text-slate-500",children:["By ",s.authorId&&typeof s.authorId=="object"?`${s.authorId.firstName} ${s.authorId.lastName}`:"Unknown"," • ",new Date(s.createdAt).toLocaleDateString()]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${s.visibility==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:s.visibility})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm mb-6 bg-slate-50 dark:bg-slate-950 p-4 rounded-lg",children:s.summary}),e.jsxs("div",{className:"flex gap-3 justify-end border-t border-slate-100 dark:border-slate-800 pt-4",children:[e.jsx("button",{onClick:()=>Je(s),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg font-medium transition-colors text-sm",children:"Preview Content"}),e.jsx("button",{onClick:()=>ae({isOpen:!0,postId:s._id}),disabled:c[s._id],className:"px-4 py-2 bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 rounded-lg font-bold hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors text-sm",children:"Reject"}),e.jsxs("button",{onClick:()=>Ye(s._id),disabled:c[s._id],className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-600/20 text-sm flex items-center gap-2",children:[c[s._id]?e.jsx(m,{className:"animate-spin",size:16}):e.jsx(ke,{size:16})," Approve"]})]})]},s._id))})]}),o==="users"&&(t==null?void 0:t.role)==="admin"&&e.jsx("div",{className:"space-y-6",children:k?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>ne(null),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:e.jsx(ts,{size:20,className:"text-slate-500"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[k.firstName," ",k.lastName]}),e.jsxs("div",{className:"flex gap-2 text-sm text-slate-500",children:[e.jsx("span",{children:k.email}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:k.role})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsx("h3",{className:"font-bold text-slate-500 uppercase text-xs mb-2",children:"Public Posts"}),e.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:Y.public.length})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsx("h3",{className:"font-bold text-slate-500 uppercase text-xs mb-2",children:"Pending Review"}),e.jsx("div",{className:"text-3xl font-bold text-yellow-600 dark:text-yellow-500",children:Y.pending.length})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsx("h3",{className:"font-bold text-slate-500 uppercase text-xs mb-2",children:"Rejected"}),e.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-500",children:Y.rejected.length})]})]}),Y.public.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 font-bold border-b border-slate-200 dark:border-slate-800",children:"Recent Public Posts"}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:Y.public.map(s=>e.jsxs("button",{onClick:()=>Je(s),className:"w-full text-left p-4 hover:bg-slate-50 dark:hover:bg-slate-800/30 flex justify-between items-center group",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white group-hover:text-accent-600 transition-colors",children:s.title}),e.jsx("span",{className:"text-xs text-slate-500",children:new Date(s.createdAt).toLocaleDateString()})]},s._id))})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"User Management"}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-slate-400 text-xs uppercase font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"User"}),e.jsx("th",{className:"px-6 py-4",children:"Role"}),e.jsx("th",{className:"px-6 py-4",children:"Joined"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-800",children:_e?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-8 text-center",children:e.jsx(m,{className:"animate-spin mx-auto"})})}):g.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"font-bold text-slate-900 dark:text-white",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-xs text-slate-500",children:s.email})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("select",{value:s.role||"user",onChange:a=>Ss(s._id,a.target.value),disabled:c[`role-${s._id}`],className:"bg-slate-100 dark:bg-slate-950 border border-slate-200 dark:border-slate-700 rounded px-2 py-1 text-xs font-bold uppercase text-slate-900 dark:text-slate-300 outline-none focus:ring-2 focus:ring-accent-500",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"admin",children:"Admin"})]}),c[`role-${s._id}`]&&e.jsx(m,{className:"animate-spin inline ml-2",size:12})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>fe(s),className:"text-accent-600 hover:underline text-sm font-medium",children:"Inspect"})})]},s._id))})]})})]})}),o==="admin_verifications"&&(t==null?void 0:t.role)==="admin"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"ID Verification Requests"}),Le?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(m,{className:"animate-spin text-accent-600"})}):De.length===0?e.jsx("div",{className:"text-center py-12 text-slate-500 bg-white dark:bg-slate-900 rounded-xl border border-dashed border-slate-200 dark:border-slate-800",children:"No pending identity checks."}):e.jsx("div",{className:"space-y-4",children:De.map((s,a)=>{var r;return e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center font-bold",children:(r=s.userEmail)==null?void 0:r[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:s.userEmail}),e.jsxs("p",{className:"text-xs text-slate-500",children:["User ID: ",s.userId||s._id]})]})]}),e.jsxs("button",{onClick:()=>ks(s),disabled:c[`view-${s.userId||s._id}`],className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 font-medium transition-colors flex items-center gap-2",children:[c[`view-${s.userId||s._id}`]?e.jsx(m,{size:16,className:"animate-spin"}):e.jsx(xs,{size:16}),"Review Doc"]})]},a)})})]}),o==="admin_profiles"&&(t==null?void 0:t.role)==="admin"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Profile Change Reviews"}),_e?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(m,{className:"animate-spin text-accent-600"})}):g.filter(s=>{var a,r;return((a=s.profileVerification)==null?void 0:a.requiresReview)&&((r=s.profileVerification)==null?void 0:r.status)==="pending"}).length===0?e.jsx("div",{className:"text-center py-12 text-slate-500 bg-white dark:bg-slate-900 rounded-xl border border-dashed border-slate-200 dark:border-slate-800",children:"No pending profile reviews."}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:g.filter(s=>{var a,r;return((a=s.profileVerification)==null?void 0:a.requiresReview)&&((r=s.profileVerification)==null?void 0:r.status)==="pending"}).map(s=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center font-bold text-xl text-slate-500 overflow-hidden",children:s.profilePic?e.jsx("img",{src:s.profilePic,className:"w-full h-full object-cover"}):s.firstName[0]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-900 dark:text-white",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-sm text-slate-500",children:s.email})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>he({isOpen:!0,userId:s._id||null}),disabled:c[`prof_${s._id}`],className:"px-4 py-2 bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 rounded-lg font-bold hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:"Reject"}),e.jsxs("button",{onClick:()=>s._id&&Ge(s._id,"verified"),disabled:c[`prof_${s._id}`],className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-600/20 flex items-center gap-2",children:[c[`prof_${s._id}`]?e.jsx(m,{size:16,className:"animate-spin"}):e.jsx(ke,{size:16})," Approve"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 bg-slate-50 dark:bg-slate-950 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-slate-500 block",children:"Username"})," ",e.jsx("span",{className:"font-medium dark:text-slate-200",children:s.username||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-slate-500 block",children:"Phone"})," ",e.jsx("span",{className:"font-medium dark:text-slate-200",children:s.phoneNumber||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-slate-500 block",children:"Passport ID"})," ",e.jsx("span",{className:"font-medium dark:text-slate-200",children:s.passportId||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-slate-500 block",children:"Address"})," ",e.jsx("span",{className:"font-medium dark:text-slate-200",children:s.address||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-slate-500 block",children:"Location"})," ",e.jsxs("span",{className:"font-medium dark:text-slate-200",children:[s.city||"-",", ",s.country||"-"]})]})]})]},s._id))})]}),o==="liked"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Liked Posts"}),H?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(m,{className:"animate-spin text-accent-600"})}):P.length===0?e.jsx("div",{className:"text-center py-12 text-slate-500 bg-white dark:bg-slate-900 rounded-xl border border-dashed border-slate-200 dark:border-slate-800",children:"You haven't liked any posts yet."}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:P.map(s=>e.jsx(le,{to:`/blog/${s.slug}`,className:"block group",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 hover:border-accent-500/50 transition-all shadow-sm hover:shadow-lg",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white group-hover:text-accent-600 transition-colors mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-slate-500 line-clamp-2",children:s.summary}),e.jsxs("div",{className:"mt-4 flex items-center gap-4 text-xs text-slate-400",children:[e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString()}),e.jsxs("span",{className:"flex items-center gap-1 text-red-500",children:[e.jsx(ss,{size:12,fill:"currentColor"})," ",s.likesCount]})]})]})},s._id))})]})]})]})]}):null};export{Ct as default};
