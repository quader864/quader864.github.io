import{w as ue,h as l,o as e,A as Be,q as Ge,y as He,X as be,K as h,z as bs,U as Re,N as us,O as gs,L as W,V as fs}from"./index-KZ7w5ljD.js";import{b as w}from"./blog-DMsYJa6l.js";import{u as Ue,U as ps,v as S}from"./user-B2UMpH-H.js";import{N as js,C as Ns,S as vs,P as Ve}from"./SafeContentRenderer-C4WRSlJH.js";import{C as Ye}from"./circle-alert-CbMXhYCp.js";import{L as ge}from"./lock-C_gxr5AB.js";import{S as ks}from"./save-Dh5f0P__.js";import{E as ys}from"./eye-off-CWH0Gf5X.js";import{E as Je}from"./eye-B_tDv9dT.js";import{T as Me}from"./triangle-alert-BAyxQeEu.js";import{H as Oe}from"./heart-3_fejGO2.js";import{S as me}from"./shield-BJS8OyB0.js";import{A as De}from"./arrow-left-jUEr-f3O.js";import{T as ws}from"./trash-2-C3kh5LmV.js";import{C as z}from"./circle-check-big-HqqrZFH-.js";import{C as Ee}from"./clock-7idkSO0d.js";import{U as Cs}from"./upload-D-6P6Mby.js";import{C as Fe}from"./check-Du8phDpu.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Is=ue("file-check",Ps);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$e=ue("file-text",Ss);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],zs=ue("shield-check",_s),Te=({isOpen:a,onClose:b,onConfirm:N})=>{const[u,n]=l.useState("");return a?e.jsx(Be,{children:e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:b}),e.jsxs(Ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-2xl p-6 max-w-sm w-full border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-full",children:e.jsx(Ye,{size:24})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Reject Post"})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-4 text-sm",children:"Please provide a reason for rejection. This will be visible to the author."}),e.jsx("textarea",{value:u,onChange:A=>n(A.target.value),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-red-500 outline-none text-slate-900 dark:text-white mb-6 resize-none",rows:3,placeholder:"Reason for rejection..."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:b,className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{N(u),b(),n("")},disabled:!u.trim(),className:"px-6 py-2 bg-red-600 text-white hover:bg-red-700 rounded-lg font-medium transition-colors shadow-lg shadow-red-600/20 disabled:opacity-50 disabled:cursor-not-allowed",children:"Reject Post"})]})]})]})}):null},he=({label:a,value:b,onChange:N,show:u,toggleShow:n})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:a}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ge,{className:"h-5 w-5 text-slate-400"})}),e.jsx("input",{type:u?"text":"password",value:b,onChange:N,className:"block w-full pl-10 pr-10 py-2.5 bg-slate-50 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-accent-500 focus:border-accent-500 dark:text-white text-slate-900 transition-colors",placeholder:"••••••••"}),e.jsx("button",{type:"button",onClick:n,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:u?e.jsx(ys,{className:"h-5 w-5"}):e.jsx(Je,{className:"h-5 w-5"})})]})]}),As=({isOpen:a,onClose:b,onSuccess:N})=>{const{changePassword:u}=He(),[n,A]=l.useState(""),[v,V]=l.useState(""),[T,M]=l.useState(""),[O,L]=l.useState(!1),[B,G]=l.useState(!1),[X,H]=l.useState(!1),[D,k]=l.useState(""),[Y,_]=l.useState(!1);if(!a)return null;const Z=async p=>{if(p.preventDefault(),k(""),console.log("[ChangePassword] Submitting form..."),v.length<8){k("New password must be at least 8 characters long.");return}if(v!==T){k("New passwords do not match.");return}if(n===v){k("New password must be different from current password.");return}_(!0);try{console.log("[ChangePassword] Calling changePassword API...");const C=await u(n,v);console.log("[ChangePassword] API Result:",C),_(!1),C.success?(N(),b(),A(""),V(""),M("")):(console.error("[ChangePassword] API Error:",C.message),k(C.message))}catch(C){console.error("[ChangePassword] Unexpected error:",C),_(!1),k("An unexpected error occurred.")}};return e.jsx(Be,{children:e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:b}),e.jsxs(Ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-2xl p-6 max-w-md w-full border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(ge,{size:20,className:"text-accent-600"})," Change Password"]}),e.jsx("button",{onClick:b,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors",children:e.jsx(be,{size:20})})]}),D&&e.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 flex items-start gap-3",children:[e.jsx(Ye,{className:"text-red-600 dark:text-red-400 shrink-0",size:20}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:D})]}),e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[e.jsx(he,{label:"Current Password",value:n,onChange:p=>A(p.target.value),show:O,toggleShow:()=>L(!O)}),e.jsx(he,{label:"New Password",value:v,onChange:p=>V(p.target.value),show:B,toggleShow:()=>G(!B)}),e.jsx(he,{label:"Confirm New Password",value:T,onChange:p=>M(p.target.value),show:X,toggleShow:()=>H(!X)}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg font-medium transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:Y,className:"px-6 py-2 bg-accent-600 text-white hover:bg-accent-700 rounded-lg font-medium transition-colors shadow-lg shadow-accent-600/20 disabled:opacity-70 disabled:cursor-not-allowed flex items-center gap-2",children:[Y?e.jsx(h,{className:"animate-spin",size:18}):e.jsx(ks,{size:18}),"Update Password"]})]})]})]})]})})},Xs=()=>{const{user:a,logout:b,isLoading:N}=He(),u=bs(),[n,A]=l.useState("overview"),[v,V]=l.useState([]),[T,M]=l.useState(!1),[O,L]=l.useState([]),[B,G]=l.useState(!1),[X,H]=l.useState(null),[D,k]=l.useState([]),[Y,_]=l.useState(!1),[Z,p]=l.useState([]),[C,fe]=l.useState(!1),[j,q]=l.useState(null),[E,pe]=l.useState({public:[],pending:[],rejected:[]}),[Ls,je]=l.useState(!1),[d,Ne]=l.useState(null),[Ke,J]=l.useState(!1),[Qe,ve]=l.useState(!1),[ke,ye]=l.useState(""),[F,we]=l.useState(null),[Ce,ee]=l.useState(null),[Pe,We]=l.useState([]),[R,$]=l.useState(null),[Xe,Ie]=l.useState(!1),[Ze,K]=l.useState(!1),[g,P]=l.useState(null),[se,Se]=l.useState({show:!1,type:"success",message:""}),[Q,te]=l.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),[ae,re]=l.useState({isOpen:!1,postId:null}),[le,de]=l.useState({isOpen:!1,userId:null}),[qe,_e]=l.useState(!1),[x,c]=l.useState({}),i=(s,t)=>{Se({show:!0,type:s,message:t})};l.useEffect(()=>{!N&&!a&&u("/auth/login")},[N,a,u]);const es=s=>{const t=s.verification;if(!t)return{status:fs.UNVERIFIED,emailVerified:!1,identityVerified:!1,identityStatus:"unverified"};let r="unverified";return t.identity.verified?r="verified":t.rejectionReason&&!t.identity.documentKey&&!t.identity.documentUrl||t.rejectionReason?r="rejected":(t.identity.documentKey||t.identity.documentUrl)&&(r="pending"),{status:t.overall,emailVerified:t.email.verified,identityVerified:t.identity.verified,identityStatus:r,rejectionReason:t.rejectionReason}};l.useEffect(()=>{if(a&&a.verification&&(Ne(es(a)),a.verificationPreview)){if(typeof a.verificationPreview=="string")ee(a.verificationPreview);else if(typeof a.verificationPreview=="object"){const s=a.verificationPreview;ee(s.presignedUrl||s.documentUrl||null)}}},[a]);const ss=async()=>{if((a==null?void 0:a.role)==="admin"||(a==null?void 0:a.role)==="moderator"){G(!0),H(null);try{const s=await w.getModerationPosts();L(s)}catch(s){console.error("Error fetching moderation posts:",s),H(s.message||"Failed to load"),i("error","Failed to fetch moderation queue")}finally{G(!1)}}},ie=async()=>{J(!0);try{const s=await S.getStatus();Ne(s)}catch(s){console.error("Fetch verification status failed:",s)}finally{J(!1)}},ne=async()=>{J(!0);try{const s=await S.getPendingRequests();We(s)}catch(s){console.error("[Dashboard] Error fetching verifications:",s)}finally{J(!1)}};l.useEffect(()=>{(n==="blog"||n==="overview")&&a&&(M(!0),w.getMyPosts(a._id||"").then(s=>{V(s),M(!1)})),n==="moderation"&&((a==null?void 0:a.role)==="admin"||(a==null?void 0:a.role)==="moderator")&&ss(),n==="users"&&(a==null?void 0:a.role)==="admin"&&(fe(!0),Ue.getAll().then(s=>{p(s),fe(!1)})),n==="liked"&&a&&(_(!0),w.getAllPublic().then(s=>{const t=String(a._id||""),r=String(a.user_id||""),o=new Set;Array.isArray(a.likedPosts)&&a.likedPosts.forEach(f=>{const U=typeof f=="object"&&f?f._id:f;U&&o.add(String(U))});const y=s.filter(f=>{const U=Array.isArray(f.likedBy)&&f.likedBy.some(m=>{const xe=typeof m=="object"&&m?m._id||m.user_id:m,Le=String(xe);return t&&Le===t||r&&Le===r}),ce=o.has(String(f._id));return U||ce});k(y),_(!1)}).catch(s=>{console.error("Failed to fetch liked posts",s),_(!1)})),(n==="verification"||n==="overview")&&a&&ie(),n==="admin_verifications"&&(a==null?void 0:a.role)==="admin"&&ne(),n!=="users"&&q(null)},[n,a]);const ts=async()=>{c(s=>({...s,otp:!0}));try{const s=await S.sendEmailOtp();s.success&&(ve(!0),i("success",s.message))}catch(s){i("error",s.message)}finally{c(s=>({...s,otp:!1}))}},as=async()=>{c(s=>({...s,otp_confirm:!0}));try{const s=await S.confirmEmailOtp(ke);s.success&&(i("success",s.message),ie(),ve(!1),ye(""))}catch(s){i("error",s.message)}finally{c(s=>({...s,otp_confirm:!1}))}},rs=s=>{if(s.target.files&&s.target.files[0]){const t=s.target.files[0];if(t.size>5*1024*1024){i("error","File size exceeds 5MB limit.");return}if(!["image/jpeg","image/png"].includes(t.type)){i("error","Only JPG and PNG allowed.");return}we(t),ee(URL.createObjectURL(t))}},ls=async()=>{if(F){c(s=>({...s,upload:!0}));try{const s=await S.uploadIdentity(F);s.success&&(i("success",s.message),we(null),ie())}catch(s){i("error",s.message)}finally{c(s=>({...s,upload:!1}))}}},ds=async s=>{const t=s.userId||s._id;if(!t){i("error","Invalid User ID");return}c(r=>({...r,[`view-${t}`]:!0})),Ie(!1),K(!0);try{const r=await S.getPresignedUrl(t);$({req:s,url:r.url,userId:t})}catch(r){i("error",r.message),K(!1)}finally{c(r=>({...r,[`view-${t}`]:!1}))}},is=async s=>{c(t=>({...t,approve_id:!0}));try{(await S.approveIdentity(s)).success&&(i("success","Identity Approved"),$(null),ne())}catch(t){i("error",t.message)}finally{c(t=>({...t,approve_id:!1}))}},ns=async(s,t)=>{c(r=>({...r,reject_id:!0}));try{(await S.rejectIdentity(s,t)).success&&(i("success","Identity Rejected"),$(null),de({isOpen:!1,userId:null}),ne())}catch(r){i("error",r.message)}finally{c(r=>({...r,reject_id:!1}))}},ze=async s=>{c(t=>({...t,[s]:!0}));try{const t=await w.approve(s);t.success?(L(r=>r.filter(o=>o._id!==s)),j&&oe(j),g&&g._id===s&&P(null),i("success",t.message)):i("error","Action failed")}catch{i("error","An error occurred")}finally{c(t=>({...t,[s]:!1}))}},os=async(s,t)=>{c(r=>({...r,[s]:!0}));try{const r=await w.reject(s,t);r.success?(L(o=>o.filter(y=>y._id!==s)),j&&oe(j),g&&g._id===s&&P(null),i("success",r.message)):i("error","Action failed")}catch{i("error","An error occurred")}finally{c(r=>({...r,[s]:!1}))}},cs=s=>{te({isOpen:!0,title:"Delete Post",message:"Are you sure you want to delete this post? This action cannot be undone.",onConfirm:async()=>{c(t=>({...t,[s]:!0}));try{const t=await w.delete(s);t.success?(i("success",t.message),V(r=>r.filter(o=>o._id!==s)),L(r=>r.filter(o=>o._id!==s)),k(r=>r.filter(o=>o._id!==s)),j&&pe(r=>({...r,public:r.public.filter(o=>o._id!==s),pending:r.pending.filter(o=>o._id!==s),rejected:r.rejected.filter(o=>o._id!==s)}))):i("error",t.message)}catch{i("error","Failed to delete post")}finally{c(t=>({...t,[s]:!1}))}}})},Ae=async s=>{if(P(s),!s.content&&!s.contentRaw)try{const t=await w.getById(s._id);t&&P(t)}catch(t){console.error("Failed to fetch full post details",t)}},xs=(s,t)=>{te({isOpen:!0,title:"Change User Role",message:`Are you sure you want to change this user's role to ${t}?`,onConfirm:async()=>{c(r=>({...r,[`role-${s}`]:!0}));try{const r=await Ue.updateRole(s,t);r.success?(i("success",r.message),p(o=>o.map(y=>y._id===s?{...y,role:t}:y))):i("error",r.message)}catch(r){i("error",r.message||"Failed to update role")}finally{c(r=>({...r,[`role-${s}`]:!1}))}}})},oe=async s=>{q(s),je(!0);try{const[t,r]=await Promise.all([w.getAllPublic(),w.getModerationPosts()]),o=m=>{const xe=typeof m.authorId=="object"&&m.authorId?m.authorId._id:m.authorId;return String(xe)===String(s._id)},y=t.filter(o),f=r.filter(o),U=f.filter(m=>m.visibility==="pending"),ce=f.filter(m=>m.visibility==="rejected");pe({public:y,pending:U,rejected:ce})}catch(t){console.error("Error inspecting user",t),i("error","Failed to load user posts")}finally{je(!1)}},ms=()=>Ke?e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:e.jsx(me,{size:20})}),e.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Account Status"})]}),e.jsxs("div",{className:"space-y-4 flex-1 animate-pulse",children:[e.jsx("div",{className:"h-12 bg-slate-100 dark:bg-slate-800/50 rounded-lg"}),e.jsx("div",{className:"h-12 bg-slate-100 dark:bg-slate-800/50 rounded-lg"})]})]}):e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:e.jsx(me,{size:20})}),e.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Account Status"})]}),e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Level 1 (Email)"}),d!=null&&d.emailVerified?e.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-bold text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded-full",children:[e.jsx(z,{size:12})," Verified"]}):e.jsx("span",{className:"flex items-center gap-1.5 text-xs font-bold text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full",children:"Unverified"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Level 2 (Identity)"}),d!=null&&d.identityVerified||(d==null?void 0:d.status)==="FULLY_VERIFIED"?e.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-bold text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded-full",children:[e.jsx(z,{size:12})," Verified"]}):(d==null?void 0:d.identityStatus)==="pending"||(d==null?void 0:d.status)==="PENDING"?e.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-bold text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/20 px-2 py-1 rounded-full",children:[e.jsx(Ee,{size:12})," Pending"]}):e.jsx("span",{className:"flex items-center gap-1.5 text-xs font-bold text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full",children:"Unverified"})]})]})]}),hs=async()=>{await b(),u("/")},I=({id:s,label:t,icon:r})=>e.jsxs("button",{onClick:()=>A(s),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ${n===s?"bg-accent-600 text-white shadow-md shadow-accent-600/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx(r,{size:18}),t]});return N?e.jsx("div",{className:"min-h-screen pt-24 flex items-center justify-center bg-slate-50 dark:bg-slate-950",children:e.jsxs("div",{className:"text-slate-600 dark:text-slate-400 font-medium animate-pulse flex items-center gap-2",children:[e.jsx(h,{className:"animate-spin"})," Loading dashboard..."]})}):a?e.jsxs("div",{className:"min-h-screen pt-24 pb-12 bg-slate-50 dark:bg-slate-950 px-4 sm:px-6 lg:px-8 transition-colors duration-500",children:[e.jsx(js,{show:se.show,type:se.type,message:se.message,onClose:()=>Se(s=>({...s,show:!1}))}),e.jsx(Ns,{isOpen:Q.isOpen,title:Q.title,message:Q.message,onClose:()=>te(s=>({...s,isOpen:!1})),onConfirm:Q.onConfirm}),e.jsx(Te,{isOpen:ae.isOpen,onClose:()=>re(s=>({...s,isOpen:!1})),onConfirm:s=>{ae.postId&&os(ae.postId,s)}}),e.jsx(Te,{isOpen:le.isOpen,onClose:()=>de(s=>({...s,isOpen:!1})),onConfirm:s=>{le.userId&&ns(le.userId,s)}}),e.jsx(As,{isOpen:qe,onClose:()=>_e(!1),onSuccess:()=>i("success","Password updated successfully")}),g&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/80 backdrop-blur-sm",onClick:()=>P(null)}),e.jsxs("div",{className:"relative bg-white dark:bg-slate-900 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-lg dark:text-white",children:["Reviewing: ",g.title]}),e.jsx("button",{onClick:()=>P(null),children:e.jsx(be,{size:20,className:"text-slate-500"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50 dark:bg-slate-950",children:e.jsx(vs,{content:g.content||g.contentRaw,title:g.title})}),e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{re({isOpen:!0,postId:g._id}),P(null)},className:"px-4 py-2 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded-lg font-bold",children:"Reject"}),e.jsx("button",{onClick:()=>{ze(g._id),P(null)},className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700",children:"Approve & Publish"})]})]})]}),R&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/90 backdrop-blur-md",onClick:()=>$(null)}),e.jsxs("div",{className:"relative bg-white dark:bg-slate-900 rounded-2xl w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center bg-slate-50 dark:bg-slate-900",children:[e.jsxs("h3",{className:"font-bold text-lg dark:text-white flex items-center gap-2",children:[e.jsx(Re,{size:20,className:"text-emerald-500"}),"Review Identity: ",R.req.userEmail]}),e.jsx("button",{onClick:()=>$(null),children:e.jsx(be,{size:20,className:"text-slate-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-100 dark:bg-black flex items-center justify-center",children:[Ze&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/50 dark:bg-black/50 z-10",children:e.jsx(h,{className:"animate-spin text-emerald-500",size:32})}),Xe?e.jsxs("div",{className:"text-center p-8 text-red-500 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-200 dark:border-red-900",children:[e.jsx(Me,{size:48,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Failed to load document image."}),e.jsx("p",{className:"text-xs mt-2 opacity-70",children:"The URL may have expired or is invalid."})]}):e.jsx("img",{src:R.url,alt:"ID Document",className:"max-w-full max-h-[60vh] object-contain rounded-lg shadow-lg border border-slate-200 dark:border-slate-800",onLoad:()=>K(!1),onError:()=>{Ie(!0),K(!1)}})]}),e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex justify-between items-center",children:[e.jsxs("div",{className:"text-xs text-slate-500",children:["User ID: ",e.jsx("span",{className:"font-mono",children:R.userId})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>de({isOpen:!0,userId:R.userId}),disabled:x.reject_id,className:"px-4 py-2 bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 rounded-lg font-bold hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:"Reject"}),e.jsxs("button",{onClick:()=>is(R.userId),disabled:x.approve_id,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-600/20 disabled:opacity-70 disabled:cursor-wait flex items-center gap-2",children:[x.approve_id&&e.jsx(h,{size:16,className:"animate-spin"}),"Approve Identity"]})]})]})]})]}),e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row gap-8",children:[e.jsx("aside",{className:"w-full md:w-64 shrink-0",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 sticky top-24",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-100 dark:bg-accent-900/30 text-accent-600 dark:text-accent-400 flex items-center justify-center font-bold text-xl",children:a.firstName[0]}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white truncate",children:a.firstName}),e.jsx("p",{className:"text-xs text-slate-500 truncate",children:a.email})]})]}),e.jsxs("nav",{className:"space-y-1",children:[e.jsx(I,{id:"overview",label:"Overview",icon:us}),e.jsx(I,{id:"profile",label:"My Profile",icon:Re}),e.jsx(I,{id:"blog",label:"My Posts",icon:$e}),e.jsx(I,{id:"liked",label:"Liked Posts",icon:Oe}),e.jsx(I,{id:"verification",label:"Verification",icon:zs}),(a.role==="admin"||a.role==="moderator")&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-4 border-t border-slate-100 dark:border-slate-800"}),e.jsx("h4",{className:"px-4 text-xs font-bold text-slate-400 uppercase mb-2",children:"Staff Area"}),e.jsx(I,{id:"moderation",label:"Moderation Queue",icon:me})]}),a.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(I,{id:"admin_verifications",label:"ID Verification",icon:Is}),e.jsx(I,{id:"users",label:"User Management",icon:ps})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 dark:border-slate-800",children:e.jsxs("button",{onClick:hs,className:"w-full flex items-center gap-3 px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:[e.jsx(gs,{size:18})," Sign Out"]})})]})}),e.jsxs("main",{className:"flex-1 min-w-0",children:[n==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Dashboard Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ms(),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded-lg",children:e.jsx($e,{size:20})}),e.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"My Contributions"})]}),e.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-1",children:v.length}),e.jsx("p",{className:"text-sm text-slate-500",children:"Total posts created"}),e.jsxs(W,{to:"/blog/editor",className:"mt-4 inline-flex items-center text-sm text-accent-600 hover:underline",children:["Write new post ",e.jsx(De,{className:"rotate-180 ml-1",size:14})]})]})]})]}),n==="profile"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"My Profile"}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-8 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-accent-100 dark:bg-accent-900/30 text-accent-600 dark:text-accent-400 flex items-center justify-center font-bold text-4xl border-4 border-slate-50 dark:border-slate-800",children:a.firstName[0]}),e.jsxs("div",{className:"text-center md:text-left space-y-2",children:[e.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[a.firstName," ",a.lastName]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:a.email}),e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 pt-2",children:[e.jsx("span",{className:"px-3 py-1 bg-slate-100 dark:bg-slate-800 rounded-full text-xs font-bold uppercase text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-slate-700",children:a.role||"User"}),a._id&&e.jsxs("span",{className:"px-3 py-1 bg-slate-100 dark:bg-slate-800 rounded-full text-xs font-mono text-slate-500 border border-slate-200 dark:border-slate-700",children:["ID: ",a._id.substring(0,8),"..."]})]})]})]}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-100 dark:border-slate-800",children:[e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white mb-4",children:"Security Settings"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between p-4 bg-slate-50 dark:bg-slate-950 rounded-lg border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-0",children:[e.jsx("div",{className:"p-2 bg-white dark:bg-slate-900 rounded-full border border-slate-200 dark:border-slate-800 text-slate-500",children:e.jsx(ge,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:"Password"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Last changed: Never"})]})]}),e.jsx("button",{onClick:()=>_e(!0),className:"px-4 py-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-lg text-sm font-medium hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors shadow-sm",children:"Change Password"})]})]})]})]}),n==="blog"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"My Posts"}),e.jsxs(W,{to:"/blog/editor",className:"px-4 py-2 bg-accent-600 text-white rounded-lg hover:bg-accent-700 transition-colors text-sm font-medium flex items-center gap-2",children:[e.jsx(Ve,{size:16})," New Post"]})]}),T?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(h,{className:"animate-spin text-accent-600"})}):v.length===0?e.jsx("div",{className:"text-center py-12 bg-white dark:bg-slate-900 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:e.jsx("p",{className:"text-slate-500",children:"You haven't written any posts yet."})}):e.jsx("div",{className:"space-y-4",children:v.map(s=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:s.title}),e.jsxs("div",{className:"flex gap-2 text-xs mt-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded capitalize ${s.visibility==="public"?"bg-green-100 text-green-700":s.visibility==="pending"?"bg-yellow-100 text-yellow-700":s.visibility==="rejected"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-600"}`,children:s.visibility}),e.jsx("span",{className:"text-slate-400",children:new Date(s.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(W,{to:`/blog/editor/${s._id}`,className:"p-2 text-slate-500 hover:text-accent-600 hover:bg-slate-100 dark:hover:bg-slate-800 rounded transition-colors",children:e.jsx(Ve,{size:18})}),e.jsx("button",{onClick:()=>cs(s._id),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",children:e.jsx(ws,{size:18})})]})]},s._id))})]}),n==="verification"&&e.jsxs("div",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Account Verification"}),e.jsxs("div",{className:`bg-white dark:bg-slate-900 p-6 rounded-xl border ${d!=null&&d.emailVerified?"border-green-200 dark:border-green-900/50":"border-slate-200 dark:border-slate-800"} relative overflow-hidden`,children:[(d==null?void 0:d.emailVerified)&&e.jsx("div",{className:"absolute top-0 right-0 p-4",children:e.jsx(z,{className:"text-green-500",size:24})}),e.jsx("h3",{className:"font-bold text-lg mb-2 dark:text-white",children:"Level 1: Email Verification"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:"Required for basic commenting and posting."}),d!=null&&d.emailVerified?e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-sm font-bold",children:[e.jsx(z,{size:16})," Verified"]}):e.jsx("div",{className:"space-y-4 max-w-sm",children:Qe?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter OTP",className:"flex-1 px-4 py-2 bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-lg outline-none",value:ke,onChange:s=>ye(s.target.value)}),e.jsx("button",{onClick:as,disabled:x.otp_confirm,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:x.otp_confirm?e.jsx(h,{className:"animate-spin"}):"Confirm"})]}):e.jsx("button",{onClick:ts,disabled:x.otp,className:"px-4 py-2 bg-accent-600 text-white rounded-lg hover:bg-accent-700 transition-colors disabled:opacity-50",children:x.otp?e.jsx(h,{className:"animate-spin"}):"Send Verification Code"})})]}),e.jsxs("div",{className:`bg-white dark:bg-slate-900 p-6 rounded-xl border ${d!=null&&d.identityVerified?"border-green-200 dark:border-green-900/50":"border-slate-200 dark:border-slate-800"} relative overflow-hidden`,children:[(d==null?void 0:d.identityVerified)&&e.jsx("div",{className:"absolute top-0 right-0 p-4",children:e.jsx(z,{className:"text-green-500",size:24})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-bold text-lg dark:text-white",children:"Level 2: Identity Verification"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Required for advanced features and badge."})]}),d!=null&&d.identityVerified?e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-sm font-bold",children:[e.jsx(z,{size:16})," Verified"]}):(d==null?void 0:d.identityStatus)==="pending"?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-100 dark:border-yellow-900/30 rounded-lg text-yellow-800 dark:text-yellow-400 flex items-start gap-3",children:[e.jsx(Ee,{className:"shrink-0 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm",children:"Under Review"}),e.jsx("p",{className:"text-xs mt-1 opacity-90",children:"Your document has been uploaded and is waiting for administrator approval."})]})]}),Ce&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 mb-2",children:"Submitted Document:"}),e.jsx("img",{src:Ce,alt:"Uploaded Doc",className:"h-32 rounded border border-slate-200 dark:border-slate-700"})]})]}):e.jsxs("div",{className:"space-y-4 max-w-sm",children:[(d==null?void 0:d.rejectionReason)&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-900/30 rounded-lg text-red-800 dark:text-red-400 mb-4",children:[e.jsxs("p",{className:"font-bold text-sm flex items-center gap-2",children:[e.jsx(Me,{size:16})," Application Rejected"]}),e.jsxs("p",{className:"text-xs mt-1",children:["Reason: ",d.rejectionReason]})]}),e.jsxs("div",{className:"border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-xl p-6 text-center hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors relative",children:[e.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:"image/jpeg,image/png",onChange:rs}),e.jsx(Cs,{className:"mx-auto text-slate-400 mb-2",size:24}),e.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:F?F.name:"Click to upload ID (JPG/PNG)"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Max 5MB"})]}),F&&e.jsx("button",{onClick:ls,disabled:x.upload,className:"w-full px-4 py-2 bg-accent-600 text-white rounded-lg hover:bg-accent-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:x.upload?e.jsx(h,{className:"animate-spin",size:18}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{size:18})," Submit Document"]})})]})]})]}),n==="moderation"&&((a==null?void 0:a.role)==="admin"||(a==null?void 0:a.role)==="moderator")&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Moderation Queue"}),B?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(h,{className:"animate-spin text-accent-600"})}):O.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-900 rounded-xl border border-dashed border-slate-200 dark:border-slate-800 text-slate-500",children:[e.jsx(z,{className:"mx-auto mb-2 text-green-500",size:32}),e.jsx("p",{children:"All caught up! No pending posts."})]}):e.jsx("div",{className:"space-y-4",children:O.map(s=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:s.title}),e.jsxs("p",{className:"text-sm text-slate-500",children:["By ",s.authorId&&typeof s.authorId=="object"?`${s.authorId.firstName} ${s.authorId.lastName}`:"Unknown"," • ",new Date(s.createdAt).toLocaleDateString()]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${s.visibility==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:s.visibility})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm mb-6 bg-slate-50 dark:bg-slate-950 p-4 rounded-lg",children:s.summary}),e.jsxs("div",{className:"flex gap-3 justify-end border-t border-slate-100 dark:border-slate-800 pt-4",children:[e.jsx("button",{onClick:()=>Ae(s),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg font-medium transition-colors text-sm",children:"Preview Content"}),e.jsx("button",{onClick:()=>re({isOpen:!0,postId:s._id}),disabled:x[s._id],className:"px-4 py-2 bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 rounded-lg font-bold hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors text-sm",children:"Reject"}),e.jsxs("button",{onClick:()=>ze(s._id),disabled:x[s._id],className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-600/20 text-sm flex items-center gap-2",children:[x[s._id]?e.jsx(h,{className:"animate-spin",size:16}):e.jsx(Fe,{size:16})," Approve"]})]})]},s._id))})]}),n==="users"&&(a==null?void 0:a.role)==="admin"&&e.jsx("div",{className:"space-y-6",children:j?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>q(null),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:e.jsx(De,{size:20,className:"text-slate-500"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[j.firstName," ",j.lastName]}),e.jsxs("div",{className:"flex gap-2 text-sm text-slate-500",children:[e.jsx("span",{children:j.email}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:j.role})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsx("h3",{className:"font-bold text-slate-500 uppercase text-xs mb-2",children:"Public Posts"}),e.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:E.public.length})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsx("h3",{className:"font-bold text-slate-500 uppercase text-xs mb-2",children:"Pending Review"}),e.jsx("div",{className:"text-3xl font-bold text-yellow-600 dark:text-yellow-500",children:E.pending.length})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsx("h3",{className:"font-bold text-slate-500 uppercase text-xs mb-2",children:"Rejected"}),e.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-500",children:E.rejected.length})]})]}),E.public.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 font-bold border-b border-slate-200 dark:border-slate-800",children:"Recent Public Posts"}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:E.public.map(s=>e.jsxs("button",{onClick:()=>Ae(s),className:"w-full text-left p-4 hover:bg-slate-50 dark:hover:bg-slate-800/30 flex justify-between items-center group",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white group-hover:text-accent-600 transition-colors",children:s.title}),e.jsx("span",{className:"text-xs text-slate-500",children:new Date(s.createdAt).toLocaleDateString()})]},s._id))})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"User Management"}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-slate-400 text-xs uppercase font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"User"}),e.jsx("th",{className:"px-6 py-4",children:"Role"}),e.jsx("th",{className:"px-6 py-4",children:"Joined"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-800",children:C?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-8 text-center",children:e.jsx(h,{className:"animate-spin mx-auto"})})}):Z.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"font-bold text-slate-900 dark:text-white",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-xs text-slate-500",children:s.email})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("select",{value:s.role||"user",onChange:t=>xs(s._id,t.target.value),disabled:x[`role-${s._id}`],className:"bg-slate-100 dark:bg-slate-950 border border-slate-200 dark:border-slate-700 rounded px-2 py-1 text-xs font-bold uppercase text-slate-900 dark:text-slate-300 outline-none focus:ring-2 focus:ring-accent-500",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"admin",children:"Admin"})]}),x[`role-${s._id}`]&&e.jsx(h,{className:"animate-spin inline ml-2",size:12})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>oe(s),className:"text-accent-600 hover:underline text-sm font-medium",children:"Inspect"})})]},s._id))})]})})]})}),n==="admin_verifications"&&(a==null?void 0:a.role)==="admin"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"ID Verification Requests"}),Pe.length===0?e.jsx("div",{className:"text-center py-12 text-slate-500 bg-white dark:bg-slate-900 rounded-xl border border-dashed border-slate-200 dark:border-slate-800",children:"No pending identity checks."}):e.jsx("div",{className:"space-y-4",children:Pe.map((s,t)=>{var r;return e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center font-bold",children:(r=s.userEmail)==null?void 0:r[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:s.userEmail}),e.jsxs("p",{className:"text-xs text-slate-500",children:["User ID: ",s.userId||s._id]})]})]}),e.jsxs("button",{onClick:()=>ds(s),disabled:x[`view-${s.userId||s._id}`],className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 font-medium transition-colors flex items-center gap-2",children:[x[`view-${s.userId||s._id}`]?e.jsx(h,{size:16,className:"animate-spin"}):e.jsx(Je,{size:16}),"Review Doc"]})]},t)})})]}),n==="liked"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Liked Posts"}),Y?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(h,{className:"animate-spin text-accent-600"})}):D.length===0?e.jsx("div",{className:"text-center py-12 text-slate-500 bg-white dark:bg-slate-900 rounded-xl border border-dashed border-slate-200 dark:border-slate-800",children:"You haven't liked any posts yet."}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:D.map(s=>e.jsx(W,{to:`/blog/${s.slug}`,className:"block group",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 hover:border-accent-500/50 transition-all shadow-sm hover:shadow-lg",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white group-hover:text-accent-600 transition-colors mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-slate-500 line-clamp-2",children:s.summary}),e.jsxs("div",{className:"mt-4 flex items-center gap-4 text-xs text-slate-400",children:[e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString()}),e.jsxs("span",{className:"flex items-center gap-1 text-red-500",children:[e.jsx(Oe,{size:12,fill:"currentColor"})," ",s.likesCount]})]})]})},s._id))})]})]})]})]}):null};export{Xs as default};
