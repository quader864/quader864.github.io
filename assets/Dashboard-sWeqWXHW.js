import{w as ge,h as l,o as e,A as $e,q as Te,y as Be,X as be,K as h,z as ms,U as hs,N as bs,O as us,L as Z,V as gs}from"./index-By5lbZh6.js";import{b as y}from"./blog-DMsYJa6l.js";import{u as Ae,U as fs,v as C}from"./user-Cz7Pv-eV.js";import{N as ps,C as js,S as vs,P as Re}from"./SafeContentRenderer-6JVY_2A-.js";import{C as Ge}from"./circle-alert-Osezp-Vl.js";import{L as ue}from"./lock-CA8D4Rht.js";import{S as Ns}from"./save-DZWJ4Ue_.js";import{E as ys}from"./eye-off-GDQIA_op.js";import{E as He}from"./eye-CQp9gR8h.js";import{T as Ue}from"./triangle-alert-DcWKWere.js";import{H as Ve}from"./heart-4i2xOfR-.js";import{S as he}from"./shield-DH_yXXPK.js";import{A as Me}from"./arrow-left-C-Bw5Eig.js";import{T as ks}from"./trash-2-B211Je6J.js";import{C as z}from"./circle-check-big-Dn_WdABh.js";import{C as Oe}from"./clock-CJXXlemn.js";import{U as ws}from"./upload-Br1cRRUy.js";import{C as De}from"./check-Bcfxawrn.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Ps=ge("file-check",Cs);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ee=ge("file-text",Is);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_s=ge("shield-check",Ss),Fe=({isOpen:a,onClose:p,onConfirm:P})=>{const[j,n]=l.useState("");return a?e.jsx($e,{children:e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:p}),e.jsxs(Te.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-2xl p-6 max-w-sm w-full border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-full",children:e.jsx(Ge,{size:24})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Reject Post"})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-4 text-sm",children:"Please provide a reason for rejection. This will be visible to the author."}),e.jsx("textarea",{value:j,onChange:L=>n(L.target.value),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-red-500 outline-none text-slate-900 dark:text-white mb-6 resize-none",rows:3,placeholder:"Reason for rejection..."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:p,className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{P(j),p(),n("")},disabled:!j.trim(),className:"px-6 py-2 bg-red-600 text-white hover:bg-red-700 rounded-lg font-medium transition-colors shadow-lg shadow-red-600/20 disabled:opacity-50 disabled:cursor-not-allowed",children:"Reject Post"})]})]})]})}):null},zs=({isOpen:a,onClose:p,onSuccess:P})=>{const{changePassword:j}=Be(),[n,L]=l.useState(""),[v,D]=l.useState(""),[G,E]=l.useState(""),[F,A]=l.useState(!1),[H,Y]=l.useState(!1),[q,J]=l.useState(!1),[$,k]=l.useState(""),[K,R]=l.useState(!1);if(!a)return null;const ee=async u=>{if(u.preventDefault(),k(""),v.length<8){k("New password must be at least 8 characters long.");return}if(v!==G){k("New passwords do not match.");return}if(n===v){k("New password must be different from current password.");return}R(!0);const I=await j(n,v);R(!1),I.success?(P(),p(),L(""),D(""),E("")):k(I.message)},U=({label:u,value:I,onChange:b,show:V,toggleShow:S})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:u}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ue,{className:"h-5 w-5 text-slate-400"})}),e.jsx("input",{type:V?"text":"password",value:I,onChange:b,className:"block w-full pl-10 pr-10 py-2.5 bg-slate-50 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-accent-500 focus:border-accent-500 dark:text-white text-slate-900 transition-colors",placeholder:"••••••••"}),e.jsx("button",{type:"button",onClick:S,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:V?e.jsx(ys,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})})]})]});return e.jsx($e,{children:e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:p}),e.jsxs(Te.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-2xl p-6 max-w-md w-full border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(ue,{size:20,className:"text-accent-600"})," Change Password"]}),e.jsx("button",{onClick:p,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors",children:e.jsx(be,{size:20})})]}),$&&e.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 flex items-start gap-3",children:[e.jsx(Ge,{className:"text-red-600 dark:text-red-400 shrink-0",size:20}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:$})]}),e.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[e.jsx(U,{label:"Current Password",value:n,onChange:u=>L(u.target.value),show:F,toggleShow:()=>A(!F)}),e.jsx(U,{label:"New Password",value:v,onChange:u=>D(u.target.value),show:H,toggleShow:()=>Y(!H)}),e.jsx(U,{label:"Confirm New Password",value:G,onChange:u=>E(u.target.value),show:q,toggleShow:()=>J(!q)}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg font-medium transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:K,className:"px-6 py-2 bg-accent-600 text-white hover:bg-accent-700 rounded-lg font-medium transition-colors shadow-lg shadow-accent-600/20 disabled:opacity-70 disabled:cursor-not-allowed flex items-center gap-2",children:[K?e.jsx(h,{className:"animate-spin",size:18}):e.jsx(Ns,{size:18}),"Update Password"]})]})]})]})]})})},Ws=()=>{const{user:a,logout:p,isLoading:P}=Be(),j=ms(),[n,L]=l.useState("overview"),[v,D]=l.useState([]),[G,E]=l.useState(!1),[F,A]=l.useState([]),[H,Y]=l.useState(!1),[q,J]=l.useState(null),[$,k]=l.useState([]),[K,R]=l.useState(!1),[ee,U]=l.useState([]),[u,I]=l.useState(!1),[b,V]=l.useState(null),[S,fe]=l.useState({public:[],pending:[],rejected:[]}),[Ls,pe]=l.useState(!1),[d,je]=l.useState(null),[Ye,Q]=l.useState(!1),[Je,ve]=l.useState(!1),[Ne,ye]=l.useState(""),[T,ke]=l.useState(null),[we,se]=l.useState(null),[Ce,Ke]=l.useState([]),[M,B]=l.useState(null),[Qe,Pe]=l.useState(!1),[We,W]=l.useState(!1),[g,w]=l.useState(null),[te,Ie]=l.useState({show:!1,type:"success",message:""}),[X,ae]=l.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),[re,le]=l.useState({isOpen:!1,postId:null}),[de,ie]=l.useState({isOpen:!1,userId:null}),[Xe,Se]=l.useState(!1),[x,c]=l.useState({}),i=(s,t)=>{Ie({show:!0,type:s,message:t})};l.useEffect(()=>{!P&&!a&&j("/auth/login")},[P,a,j]);const Ze=s=>{const t=s.verification;if(!t)return{status:gs.UNVERIFIED,emailVerified:!1,identityVerified:!1,identityStatus:"unverified"};let r="unverified";return t.identity.verified?r="verified":t.rejectionReason&&!t.identity.documentKey&&!t.identity.documentUrl||t.rejectionReason?r="rejected":(t.identity.documentKey||t.identity.documentUrl)&&(r="pending"),{status:t.overall,emailVerified:t.email.verified,identityVerified:t.identity.verified,identityStatus:r,rejectionReason:t.rejectionReason}};l.useEffect(()=>{if(a&&a.verification&&(je(Ze(a)),a.verificationPreview)){if(typeof a.verificationPreview=="string")se(a.verificationPreview);else if(typeof a.verificationPreview=="object"){const s=a.verificationPreview;se(s.presignedUrl||s.documentUrl||null)}}},[a]);const qe=async()=>{if((a==null?void 0:a.role)==="admin"||(a==null?void 0:a.role)==="moderator"){Y(!0),J(null);try{const s=await y.getModerationPosts();A(s)}catch(s){console.error("Error fetching moderation posts:",s),J(s.message||"Failed to load"),i("error","Failed to fetch moderation queue")}finally{Y(!1)}}},ne=async()=>{Q(!0);try{const s=await C.getStatus();je(s)}catch(s){console.error("Fetch verification status failed:",s)}finally{Q(!1)}},oe=async()=>{Q(!0);try{const s=await C.getPendingRequests();Ke(s)}catch(s){console.error("[Dashboard] Error fetching verifications:",s)}finally{Q(!1)}};l.useEffect(()=>{n==="blog"&&a&&(E(!0),y.getMyPosts(a._id||"").then(s=>{D(s),E(!1)})),n==="moderation"&&((a==null?void 0:a.role)==="admin"||(a==null?void 0:a.role)==="moderator")&&qe(),n==="users"&&(a==null?void 0:a.role)==="admin"&&(I(!0),Ae.getAll().then(s=>{U(s),I(!1)})),n==="liked"&&a&&(R(!0),y.getAllPublic().then(s=>{const t=String(a._id||""),r=String(a.user_id||""),o=new Set;Array.isArray(a.likedPosts)&&a.likedPosts.forEach(f=>{const O=typeof f=="object"&&f?f._id:f;O&&o.add(String(O))});const N=s.filter(f=>{const O=Array.isArray(f.likedBy)&&f.likedBy.some(m=>{const me=typeof m=="object"&&m?m._id||m.user_id:m,Le=String(me);return t&&Le===t||r&&Le===r}),xe=o.has(String(f._id));return O||xe});k(N),R(!1)}).catch(s=>{console.error("Failed to fetch liked posts",s),R(!1)})),(n==="verification"||n==="overview")&&a&&ne(),n==="admin_verifications"&&(a==null?void 0:a.role)==="admin"&&oe(),n!=="users"&&V(null)},[n,a]);const es=async()=>{c(s=>({...s,otp:!0}));try{const s=await C.sendEmailOtp();s.success&&(ve(!0),i("success",s.message))}catch(s){i("error",s.message)}finally{c(s=>({...s,otp:!1}))}},ss=async()=>{c(s=>({...s,otp_confirm:!0}));try{const s=await C.confirmEmailOtp(Ne);s.success&&(i("success",s.message),ne(),ve(!1),ye(""))}catch(s){i("error",s.message)}finally{c(s=>({...s,otp_confirm:!1}))}},ts=s=>{if(s.target.files&&s.target.files[0]){const t=s.target.files[0];if(t.size>5*1024*1024){i("error","File size exceeds 5MB limit.");return}if(!["image/jpeg","image/png"].includes(t.type)){i("error","Only JPG and PNG allowed.");return}ke(t),se(URL.createObjectURL(t))}},as=async()=>{if(T){c(s=>({...s,upload:!0}));try{const s=await C.uploadIdentity(T);s.success&&(i("success",s.message),ke(null),ne())}catch(s){i("error",s.message)}finally{c(s=>({...s,upload:!1}))}}},rs=async s=>{const t=s.userId||s._id;if(!t){i("error","Invalid User ID");return}c(r=>({...r,[`view-${t}`]:!0})),Pe(!1),W(!0);try{const r=await C.getPresignedUrl(t);B({req:s,url:r.url,userId:t})}catch(r){i("error",r.message),W(!1)}finally{c(r=>({...r,[`view-${t}`]:!1}))}},ls=async s=>{c(t=>({...t,approve_id:!0}));try{(await C.approveIdentity(s)).success&&(i("success","Identity Approved"),B(null),oe())}catch(t){i("error",t.message)}finally{c(t=>({...t,approve_id:!1}))}},ds=async(s,t)=>{c(r=>({...r,reject_id:!0}));try{(await C.rejectIdentity(s,t)).success&&(i("success","Identity Rejected"),B(null),ie({isOpen:!1,userId:null}),oe())}catch(r){i("error",r.message)}finally{c(r=>({...r,reject_id:!1}))}},_e=async s=>{c(t=>({...t,[s]:!0}));try{const t=await y.approve(s);t.success?(A(r=>r.filter(o=>o._id!==s)),b&&ce(b),g&&g._id===s&&w(null),i("success",t.message)):i("error","Action failed")}catch{i("error","An error occurred")}finally{c(t=>({...t,[s]:!1}))}},is=async(s,t)=>{c(r=>({...r,[s]:!0}));try{const r=await y.reject(s,t);r.success?(A(o=>o.filter(N=>N._id!==s)),b&&ce(b),g&&g._id===s&&w(null),i("success",r.message)):i("error","Action failed")}catch{i("error","An error occurred")}finally{c(r=>({...r,[s]:!1}))}},ns=s=>{ae({isOpen:!0,title:"Delete Post",message:"Are you sure you want to delete this post? This action cannot be undone.",onConfirm:async()=>{c(t=>({...t,[s]:!0}));try{const t=await y.delete(s);t.success?(i("success",t.message),D(r=>r.filter(o=>o._id!==s)),A(r=>r.filter(o=>o._id!==s)),k(r=>r.filter(o=>o._id!==s)),b&&fe(r=>({...r,public:r.public.filter(o=>o._id!==s),pending:r.pending.filter(o=>o._id!==s),rejected:r.rejected.filter(o=>o._id!==s)}))):i("error",t.message)}catch{i("error","Failed to delete post")}finally{c(t=>({...t,[s]:!1}))}}})},ze=async s=>{if(w(s),!s.content&&!s.contentRaw)try{const t=await y.getById(s._id);t&&w(t)}catch(t){console.error("Failed to fetch full post details",t)}},os=(s,t)=>{ae({isOpen:!0,title:"Change User Role",message:`Are you sure you want to change this user's role to ${t}?`,onConfirm:async()=>{c(r=>({...r,[`role-${s}`]:!0}));try{const r=await Ae.updateRole(s,t);r.success?(i("success",r.message),U(o=>o.map(N=>N._id===s?{...N,role:t}:N))):i("error",r.message)}catch(r){i("error",r.message||"Failed to update role")}finally{c(r=>({...r,[`role-${s}`]:!1}))}}})},ce=async s=>{V(s),pe(!0);try{const[t,r]=await Promise.all([y.getAllPublic(),y.getModerationPosts()]),o=m=>{const me=typeof m.authorId=="object"&&m.authorId?m.authorId._id:m.authorId;return String(me)===String(s._id)},N=t.filter(o),f=r.filter(o),O=f.filter(m=>m.visibility==="pending"),xe=f.filter(m=>m.visibility==="rejected");fe({public:N,pending:O,rejected:xe})}catch(t){console.error("Error inspecting user",t),i("error","Failed to load user posts")}finally{pe(!1)}},cs=()=>Ye?e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:e.jsx(he,{size:20})}),e.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Account Status"})]}),e.jsxs("div",{className:"space-y-4 flex-1 animate-pulse",children:[e.jsx("div",{className:"h-12 bg-slate-100 dark:bg-slate-800/50 rounded-lg"}),e.jsx("div",{className:"h-12 bg-slate-100 dark:bg-slate-800/50 rounded-lg"})]})]}):e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:e.jsx(he,{size:20})}),e.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Account Status"})]}),e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Level 1 (Email)"}),d!=null&&d.emailVerified?e.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-bold text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded-full",children:[e.jsx(z,{size:12})," Verified"]}):e.jsx("span",{className:"flex items-center gap-1.5 text-xs font-bold text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full",children:"Unverified"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Level 2 (Identity)"}),d!=null&&d.identityVerified||(d==null?void 0:d.status)==="FULLY_VERIFIED"?e.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-bold text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded-full",children:[e.jsx(z,{size:12})," Verified"]}):(d==null?void 0:d.identityStatus)==="pending"||(d==null?void 0:d.status)==="PENDING"?e.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-bold text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/20 px-2 py-1 rounded-full",children:[e.jsx(Oe,{size:12})," Pending"]}):e.jsx("span",{className:"flex items-center gap-1.5 text-xs font-bold text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full",children:"Unverified"})]})]})]}),xs=async()=>{await p(),j("/")},_=({id:s,label:t,icon:r})=>e.jsxs("button",{onClick:()=>L(s),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ${n===s?"bg-accent-600 text-white shadow-md shadow-accent-600/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx(r,{size:18}),t]});return P?e.jsx("div",{className:"min-h-screen pt-24 flex items-center justify-center bg-slate-50 dark:bg-slate-950",children:e.jsxs("div",{className:"text-slate-600 dark:text-slate-400 font-medium animate-pulse flex items-center gap-2",children:[e.jsx(h,{className:"animate-spin"})," Loading dashboard..."]})}):a?e.jsxs("div",{className:"min-h-screen pt-24 pb-12 bg-slate-50 dark:bg-slate-950 px-4 sm:px-6 lg:px-8 transition-colors duration-500",children:[e.jsx(ps,{show:te.show,type:te.type,message:te.message,onClose:()=>Ie(s=>({...s,show:!1}))}),e.jsx(js,{isOpen:X.isOpen,title:X.title,message:X.message,onClose:()=>ae(s=>({...s,isOpen:!1})),onConfirm:X.onConfirm}),e.jsx(Fe,{isOpen:re.isOpen,onClose:()=>le(s=>({...s,isOpen:!1})),onConfirm:s=>{re.postId&&is(re.postId,s)}}),e.jsx(Fe,{isOpen:de.isOpen,onClose:()=>ie(s=>({...s,isOpen:!1})),onConfirm:s=>{de.userId&&ds(de.userId,s)}}),e.jsx(zs,{isOpen:Xe,onClose:()=>Se(!1),onSuccess:()=>i("success","Password updated successfully")}),g&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/80 backdrop-blur-sm",onClick:()=>w(null)}),e.jsxs("div",{className:"relative bg-white dark:bg-slate-900 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-lg dark:text-white",children:["Reviewing: ",g.title]}),e.jsx("button",{onClick:()=>w(null),children:e.jsx(be,{size:20,className:"text-slate-500"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50 dark:bg-slate-950",children:e.jsx(vs,{content:g.content||g.contentRaw,title:g.title})}),e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{le({isOpen:!0,postId:g._id}),w(null)},className:"px-4 py-2 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded-lg font-bold",children:"Reject"}),e.jsx("button",{onClick:()=>{_e(g._id),w(null)},className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700",children:"Approve & Publish"})]})]})]}),M&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/90 backdrop-blur-md",onClick:()=>B(null)}),e.jsxs("div",{className:"relative bg-white dark:bg-slate-900 rounded-2xl w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center bg-slate-50 dark:bg-slate-900",children:[e.jsxs("h3",{className:"font-bold text-lg dark:text-white flex items-center gap-2",children:[e.jsx(hs,{size:20,className:"text-emerald-500"}),"Review Identity: ",M.req.userEmail]}),e.jsx("button",{onClick:()=>B(null),children:e.jsx(be,{size:20,className:"text-slate-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-100 dark:bg-black flex items-center justify-center",children:[We&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/50 dark:bg-black/50 z-10",children:e.jsx(h,{className:"animate-spin text-emerald-500",size:32})}),Qe?e.jsxs("div",{className:"text-center p-8 text-red-500 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-200 dark:border-red-900",children:[e.jsx(Ue,{size:48,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Failed to load document image."}),e.jsx("p",{className:"text-xs mt-2 opacity-70",children:"The URL may have expired or is invalid."})]}):e.jsx("img",{src:M.url,alt:"ID Document",className:"max-w-full max-h-[60vh] object-contain rounded-lg shadow-lg border border-slate-200 dark:border-slate-800",onLoad:()=>W(!1),onError:()=>{Pe(!0),W(!1)}})]}),e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex justify-between items-center",children:[e.jsxs("div",{className:"text-xs text-slate-500",children:["User ID: ",e.jsx("span",{className:"font-mono",children:M.userId})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>ie({isOpen:!0,userId:M.userId}),disabled:x.reject_id,className:"px-4 py-2 bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 rounded-lg font-bold hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:"Reject"}),e.jsxs("button",{onClick:()=>ls(M.userId),disabled:x.approve_id,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-600/20 disabled:opacity-70 disabled:cursor-wait flex items-center gap-2",children:[x.approve_id&&e.jsx(h,{size:16,className:"animate-spin"}),"Approve Identity"]})]})]})]})]}),e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row gap-8",children:[e.jsx("aside",{className:"w-full md:w-64 shrink-0",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 sticky top-24",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-100 dark:bg-accent-900/30 text-accent-600 dark:text-accent-400 flex items-center justify-center font-bold text-xl",children:a.firstName[0]}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white truncate",children:a.firstName}),e.jsx("p",{className:"text-xs text-slate-500 truncate",children:a.email}),e.jsxs("button",{onClick:()=>Se(!0),className:"text-xs text-accent-600 hover:text-accent-500 dark:text-accent-400 dark:hover:text-accent-300 flex items-center gap-1 mt-1 transition-colors",children:[e.jsx(ue,{size:12})," Change Password"]})]})]}),e.jsxs("nav",{className:"space-y-1",children:[e.jsx(_,{id:"overview",label:"Overview",icon:bs}),e.jsx(_,{id:"blog",label:"My Posts",icon:Ee}),e.jsx(_,{id:"liked",label:"Liked Posts",icon:Ve}),e.jsx(_,{id:"verification",label:"Verification",icon:_s}),(a.role==="admin"||a.role==="moderator")&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-4 border-t border-slate-100 dark:border-slate-800"}),e.jsx("h4",{className:"px-4 text-xs font-bold text-slate-400 uppercase mb-2",children:"Staff Area"}),e.jsx(_,{id:"moderation",label:"Moderation Queue",icon:he})]}),a.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(_,{id:"admin_verifications",label:"ID Verification",icon:Ps}),e.jsx(_,{id:"users",label:"User Management",icon:fs})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 dark:border-slate-800",children:e.jsxs("button",{onClick:xs,className:"w-full flex items-center gap-3 px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:[e.jsx(us,{size:18})," Sign Out"]})})]})}),e.jsxs("main",{className:"flex-1 min-w-0",children:[n==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Dashboard Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[cs(),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded-lg",children:e.jsx(Ee,{size:20})}),e.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"My Contributions"})]}),e.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-1",children:v.length}),e.jsx("p",{className:"text-sm text-slate-500",children:"Total posts created"}),e.jsxs(Z,{to:"/blog/editor",className:"mt-4 inline-flex items-center text-sm text-accent-600 hover:underline",children:["Write new post ",e.jsx(Me,{className:"rotate-180 ml-1",size:14})]})]})]})]}),n==="blog"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"My Posts"}),e.jsxs(Z,{to:"/blog/editor",className:"px-4 py-2 bg-accent-600 text-white rounded-lg hover:bg-accent-700 transition-colors text-sm font-medium flex items-center gap-2",children:[e.jsx(Re,{size:16})," New Post"]})]}),G?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(h,{className:"animate-spin text-accent-600"})}):v.length===0?e.jsx("div",{className:"text-center py-12 bg-white dark:bg-slate-900 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:e.jsx("p",{className:"text-slate-500",children:"You haven't written any posts yet."})}):e.jsx("div",{className:"space-y-4",children:v.map(s=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:s.title}),e.jsxs("div",{className:"flex gap-2 text-xs mt-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded capitalize ${s.visibility==="public"?"bg-green-100 text-green-700":s.visibility==="pending"?"bg-yellow-100 text-yellow-700":s.visibility==="rejected"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-600"}`,children:s.visibility}),e.jsx("span",{className:"text-slate-400",children:new Date(s.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Z,{to:`/blog/editor/${s._id}`,className:"p-2 text-slate-500 hover:text-accent-600 hover:bg-slate-100 dark:hover:bg-slate-800 rounded transition-colors",children:e.jsx(Re,{size:18})}),e.jsx("button",{onClick:()=>ns(s._id),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",children:e.jsx(ks,{size:18})})]})]},s._id))})]}),n==="verification"&&e.jsxs("div",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Account Verification"}),e.jsxs("div",{className:`bg-white dark:bg-slate-900 p-6 rounded-xl border ${d!=null&&d.emailVerified?"border-green-200 dark:border-green-900/50":"border-slate-200 dark:border-slate-800"} relative overflow-hidden`,children:[(d==null?void 0:d.emailVerified)&&e.jsx("div",{className:"absolute top-0 right-0 p-4",children:e.jsx(z,{className:"text-green-500",size:24})}),e.jsx("h3",{className:"font-bold text-lg mb-2 dark:text-white",children:"Level 1: Email Verification"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:"Required for basic commenting and posting."}),d!=null&&d.emailVerified?e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-sm font-bold",children:[e.jsx(z,{size:16})," Verified"]}):e.jsx("div",{className:"space-y-4 max-w-sm",children:Je?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter OTP",className:"flex-1 px-4 py-2 bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-lg outline-none",value:Ne,onChange:s=>ye(s.target.value)}),e.jsx("button",{onClick:ss,disabled:x.otp_confirm,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:x.otp_confirm?e.jsx(h,{className:"animate-spin"}):"Confirm"})]}):e.jsx("button",{onClick:es,disabled:x.otp,className:"px-4 py-2 bg-accent-600 text-white rounded-lg hover:bg-accent-700 transition-colors disabled:opacity-50",children:x.otp?e.jsx(h,{className:"animate-spin"}):"Send Verification Code"})})]}),e.jsxs("div",{className:`bg-white dark:bg-slate-900 p-6 rounded-xl border ${d!=null&&d.identityVerified?"border-green-200 dark:border-green-900/50":"border-slate-200 dark:border-slate-800"} relative overflow-hidden`,children:[(d==null?void 0:d.identityVerified)&&e.jsx("div",{className:"absolute top-0 right-0 p-4",children:e.jsx(z,{className:"text-green-500",size:24})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-bold text-lg dark:text-white",children:"Level 2: Identity Verification"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Required for advanced features and badge."})]}),d!=null&&d.identityVerified?e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-sm font-bold",children:[e.jsx(z,{size:16})," Verified"]}):(d==null?void 0:d.identityStatus)==="pending"?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-100 dark:border-yellow-900/30 rounded-lg text-yellow-800 dark:text-yellow-400 flex items-start gap-3",children:[e.jsx(Oe,{className:"shrink-0 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm",children:"Under Review"}),e.jsx("p",{className:"text-xs mt-1 opacity-90",children:"Your document has been uploaded and is waiting for administrator approval."})]})]}),we&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 mb-2",children:"Submitted Document:"}),e.jsx("img",{src:we,alt:"Uploaded Doc",className:"h-32 rounded border border-slate-200 dark:border-slate-700"})]})]}):e.jsxs("div",{className:"space-y-4 max-w-sm",children:[(d==null?void 0:d.rejectionReason)&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-900/30 rounded-lg text-red-800 dark:text-red-400 mb-4",children:[e.jsxs("p",{className:"font-bold text-sm flex items-center gap-2",children:[e.jsx(Ue,{size:16})," Application Rejected"]}),e.jsxs("p",{className:"text-xs mt-1",children:["Reason: ",d.rejectionReason]})]}),e.jsxs("div",{className:"border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-xl p-6 text-center hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors relative",children:[e.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:"image/jpeg,image/png",onChange:ts}),e.jsx(ws,{className:"mx-auto text-slate-400 mb-2",size:24}),e.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:T?T.name:"Click to upload ID (JPG/PNG)"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Max 5MB"})]}),T&&e.jsx("button",{onClick:as,disabled:x.upload,className:"w-full px-4 py-2 bg-accent-600 text-white rounded-lg hover:bg-accent-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:x.upload?e.jsx(h,{className:"animate-spin",size:18}):e.jsxs(e.Fragment,{children:[e.jsx(De,{size:18})," Submit Document"]})})]})]})]}),n==="moderation"&&((a==null?void 0:a.role)==="admin"||(a==null?void 0:a.role)==="moderator")&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Moderation Queue"}),H?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(h,{className:"animate-spin text-accent-600"})}):F.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-900 rounded-xl border border-dashed border-slate-200 dark:border-slate-800 text-slate-500",children:[e.jsx(z,{className:"mx-auto mb-2 text-green-500",size:32}),e.jsx("p",{children:"All caught up! No pending posts."})]}):e.jsx("div",{className:"space-y-4",children:F.map(s=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:s.title}),e.jsxs("p",{className:"text-sm text-slate-500",children:["By ",s.authorId&&typeof s.authorId=="object"?`${s.authorId.firstName} ${s.authorId.lastName}`:"Unknown"," • ",new Date(s.createdAt).toLocaleDateString()]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${s.visibility==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:s.visibility})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm mb-6 bg-slate-50 dark:bg-slate-950 p-4 rounded-lg",children:s.summary}),e.jsxs("div",{className:"flex gap-3 justify-end border-t border-slate-100 dark:border-slate-800 pt-4",children:[e.jsx("button",{onClick:()=>ze(s),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg font-medium transition-colors text-sm",children:"Preview Content"}),e.jsx("button",{onClick:()=>le({isOpen:!0,postId:s._id}),disabled:x[s._id],className:"px-4 py-2 bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 rounded-lg font-bold hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors text-sm",children:"Reject"}),e.jsxs("button",{onClick:()=>_e(s._id),disabled:x[s._id],className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-600/20 text-sm flex items-center gap-2",children:[x[s._id]?e.jsx(h,{className:"animate-spin",size:16}):e.jsx(De,{size:16})," Approve"]})]})]},s._id))})]}),n==="users"&&(a==null?void 0:a.role)==="admin"&&e.jsx("div",{className:"space-y-6",children:b?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>V(null),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:e.jsx(Me,{size:20,className:"text-slate-500"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[b.firstName," ",b.lastName]}),e.jsxs("div",{className:"flex gap-2 text-sm text-slate-500",children:[e.jsx("span",{children:b.email}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:b.role})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsx("h3",{className:"font-bold text-slate-500 uppercase text-xs mb-2",children:"Public Posts"}),e.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:S.public.length})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsx("h3",{className:"font-bold text-slate-500 uppercase text-xs mb-2",children:"Pending Review"}),e.jsx("div",{className:"text-3xl font-bold text-yellow-600 dark:text-yellow-500",children:S.pending.length})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsx("h3",{className:"font-bold text-slate-500 uppercase text-xs mb-2",children:"Rejected"}),e.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-500",children:S.rejected.length})]})]}),S.public.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 font-bold border-b border-slate-200 dark:border-slate-800",children:"Recent Public Posts"}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:S.public.map(s=>e.jsxs("button",{onClick:()=>ze(s),className:"w-full text-left p-4 hover:bg-slate-50 dark:hover:bg-slate-800/30 flex justify-between items-center group",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white group-hover:text-accent-600 transition-colors",children:s.title}),e.jsx("span",{className:"text-xs text-slate-500",children:new Date(s.createdAt).toLocaleDateString()})]},s._id))})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"User Management"}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-slate-400 text-xs uppercase font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"User"}),e.jsx("th",{className:"px-6 py-4",children:"Role"}),e.jsx("th",{className:"px-6 py-4",children:"Joined"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-800",children:u?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-8 text-center",children:e.jsx(h,{className:"animate-spin mx-auto"})})}):ee.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"font-bold text-slate-900 dark:text-white",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-xs text-slate-500",children:s.email})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("select",{value:s.role||"user",onChange:t=>os(s._id,t.target.value),disabled:x[`role-${s._id}`],className:"bg-slate-100 dark:bg-slate-950 border border-slate-200 dark:border-slate-700 rounded px-2 py-1 text-xs font-bold uppercase text-slate-900 dark:text-slate-300 outline-none focus:ring-2 focus:ring-accent-500",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"admin",children:"Admin"})]}),x[`role-${s._id}`]&&e.jsx(h,{className:"animate-spin inline ml-2",size:12})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>ce(s),className:"text-accent-600 hover:underline text-sm font-medium",children:"Inspect"})})]},s._id))})]})})]})}),n==="admin_verifications"&&(a==null?void 0:a.role)==="admin"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"ID Verification Requests"}),Ce.length===0?e.jsx("div",{className:"text-center py-12 text-slate-500 bg-white dark:bg-slate-900 rounded-xl border border-dashed border-slate-200 dark:border-slate-800",children:"No pending identity checks."}):e.jsx("div",{className:"space-y-4",children:Ce.map((s,t)=>{var r;return e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center font-bold",children:(r=s.userEmail)==null?void 0:r[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:s.userEmail}),e.jsxs("p",{className:"text-xs text-slate-500",children:["User ID: ",s.userId||s._id]})]})]}),e.jsxs("button",{onClick:()=>rs(s),disabled:x[`view-${s.userId||s._id}`],className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 font-medium transition-colors flex items-center gap-2",children:[x[`view-${s.userId||s._id}`]?e.jsx(h,{size:16,className:"animate-spin"}):e.jsx(He,{size:16}),"Review Doc"]})]},t)})})]}),n==="liked"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Liked Posts"}),K?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(h,{className:"animate-spin text-accent-600"})}):$.length===0?e.jsx("div",{className:"text-center py-12 text-slate-500 bg-white dark:bg-slate-900 rounded-xl border border-dashed border-slate-200 dark:border-slate-800",children:"You haven't liked any posts yet."}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:$.map(s=>e.jsx(Z,{to:`/blog/${s.slug}`,className:"block group",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 hover:border-accent-500/50 transition-all shadow-sm hover:shadow-lg",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white group-hover:text-accent-600 transition-colors mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-slate-500 line-clamp-2",children:s.summary}),e.jsxs("div",{className:"mt-4 flex items-center gap-4 text-xs text-slate-400",children:[e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString()}),e.jsxs("span",{className:"flex items-center gap-1 text-red-500",children:[e.jsx(Ve,{size:12,fill:"currentColor"})," ",s.likesCount]})]})]})},s._id))})]})]})]})]}):null};export{Ws as default};
