import{Q as A,z as $,W as I,y as P,h as c,o as e,q as d,A as B}from"./index-CyL_LHZD.js";import{S as D}from"./ShopHeader-Czqopws0.js";import{A as V}from"./arrow-left-19gUAP-D.js";import{S as x}from"./star-CVKnXnjm.js";import{C as k}from"./circle-check-BiBEiLqb.js";import{S as L}from"./shopping-bag-CJo8cPoW.js";import{S as N}from"./shield-qFqMu8fT.js";import{I as q}from"./info-BbZv9ckV.js";import{M as E}from"./message-square-DWGQ-NUJ.js";import{A as F}from"./award-B1daTDtl.js";import"./search-ql-Bptym.js";import"./trash-2-CBYYz6iO.js";import"./arrow-right-3HMKQti1.js";const Z=()=>{const{id:r}=A(),m=$(),{getStoreItem:v,addToCart:y,reviews:b,addReview:w,checkVerifiedBuyer:S}=I(),{user:l}=P(),a=r?v(r):void 0,i=r&&b[r]?b[r]:[],[p,C]=c.useState(5),[h,g]=c.useState(""),[u,n]=c.useState(!1);if(!a)return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 flex flex-col items-center justify-center text-center p-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-4",children:"Item Not Found"}),e.jsx("button",{onClick:()=>m("/shop"),className:"text-emerald-600 hover:underline",children:"Return to Shop"})]});const f=r?S(r):!1,R=t=>{if(t.preventDefault(),!l||!r)return;let s="user";f&&(s="buyer"),l.role==="admin"&&(s="admin");const j={id:`rev_${Date.now()}`,userId:l._id||"unknown",userName:`${l.firstName} ${l.lastName}`,rating:p,content:h,date:new Date().toISOString(),isVerified:f,role:s};w(r,j),g(""),n(!1)},z=(t,s)=>t==="admin"?{label:"Admin",icon:N,containerStyle:"bg-purple-50/50 dark:bg-purple-900/10 border-purple-200 dark:border-purple-800/30",badgeStyle:"text-purple-600 bg-purple-100 border-purple-200 dark:bg-purple-900/30 dark:text-purple-300 dark:border-purple-800",avatarStyle:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300"}:t==="seller"?{label:"Author",icon:F,containerStyle:"bg-indigo-50/50 dark:bg-indigo-900/10 border-indigo-200 dark:border-indigo-800/30",badgeStyle:"text-indigo-600 bg-indigo-100 border-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:border-indigo-800",avatarStyle:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300"}:s||t==="buyer"?{label:"Verified Buyer",icon:k,containerStyle:"bg-emerald-50/50 dark:bg-emerald-900/10 border-emerald-200 dark:border-emerald-800/30",badgeStyle:"text-emerald-600 bg-emerald-100 border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-800",avatarStyle:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300"}:{label:"User",icon:null,containerStyle:"bg-white dark:bg-slate-900 border-slate-100 dark:border-slate-800",badgeStyle:"hidden",avatarStyle:"bg-slate-100 text-slate-500 dark:bg-slate-800 dark:text-slate-400"};return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 transition-colors duration-500 font-sans selection:bg-emerald-500/30",children:[e.jsx(D,{}),e.jsxs("div",{className:"pt-24 pb-12 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("button",{onClick:()=>m(-1),className:"flex items-center gap-2 text-slate-500 hover:text-emerald-600 mb-8 transition-colors",children:[e.jsx(V,{size:20})," Back"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 mb-16",children:[e.jsx(d.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"relative rounded-3xl overflow-hidden bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 shadow-xl",children:e.jsxs("div",{className:"aspect-[4/3] relative",children:[e.jsx("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-6 left-6",children:e.jsx("span",{className:"px-4 py-2 bg-white/90 dark:bg-black/80 backdrop-blur text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider rounded-full shadow-lg",children:a.type})}),a.originalPrice&&a.originalPrice>a.price&&e.jsx("div",{className:"absolute top-6 right-6",children:e.jsx("span",{className:"px-4 py-2 bg-red-600 text-white text-sm font-bold uppercase tracking-wider rounded-full shadow-lg",children:"SALE"})})]})}),e.jsxs(d.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"flex flex-col",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-black text-slate-900 dark:text-white mb-4 leading-tight",children:a.title}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-1 text-yellow-500",children:[e.jsx(x,{size:20,fill:"currentColor"}),e.jsx("span",{className:"text-xl font-bold text-slate-900 dark:text-white",children:a.rating})]}),e.jsx("span",{className:"text-slate-400",children:"|"}),e.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[i.length," Reviews"]})]}),e.jsxs("div",{className:"flex items-baseline gap-4 mb-8",children:[e.jsxs("span",{className:"text-5xl font-black text-emerald-600 dark:text-emerald-400",children:["$",a.price]}),a.originalPrice&&e.jsxs("span",{className:"text-xl text-slate-400 line-through decoration-2",children:["$",a.originalPrice]})]}),e.jsx("div",{className:"prose dark:prose-invert text-slate-600 dark:text-slate-300 mb-8 leading-relaxed",children:e.jsx("p",{children:a.description})}),e.jsx("div",{className:"space-y-4 mb-10",children:a.features.map((t,s)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(k,{size:22,className:"text-emerald-500 shrink-0 mt-0.5"}),e.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:t})]},s))}),e.jsxs("div",{className:"mt-auto pt-8 border-t border-slate-200 dark:border-slate-800",children:[e.jsxs("button",{onClick:()=>y(a),className:"w-full py-4 bg-emerald-600 text-white rounded-xl font-bold text-lg hover:bg-emerald-700 transition-all shadow-xl shadow-emerald-600/25 flex items-center justify-center gap-3 transform hover:-translate-y-1",children:[e.jsx(L,{size:24})," Add to Cart"]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-slate-400 mt-4 uppercase tracking-widest",children:[e.jsx(N,{size:14})," 100% Secure Checkout"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1 space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6",children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(q,{size:20,className:"text-emerald-500"})," Product Specs"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-slate-500",children:"Category"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white capitalize",children:a.type})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-slate-500",children:"Last Updated"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:"Oct 2023"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-slate-500",children:"Version"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:"v2.1"})]}),a.tags.length>0&&e.jsxs("div",{className:"pt-2",children:[e.jsx("span",{className:"block text-slate-500 mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map(t=>e.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-xs font-medium text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700",children:["#",t]},t))})]})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(E,{size:24,className:"text-emerald-500"})," Customer Reviews"]}),l&&!u&&e.jsx("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 text-slate-900 dark:text-white font-bold rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors text-sm",children:"Write a Review"})]}),e.jsx(B,{children:u&&e.jsxs(d.form,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-8 bg-slate-50 dark:bg-slate-950 p-6 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden",onSubmit:R,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Rating"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onClick:()=>C(t),className:`p-1 transition-transform hover:scale-110 ${t<=p?"text-yellow-400":"text-slate-300 dark:text-slate-700"}`,children:e.jsx(x,{size:24,fill:"currentColor"})},t))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Review"}),e.jsx("textarea",{value:h,onChange:t=>g(t.target.value),className:"w-full p-3 rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-emerald-500 outline-none dark:text-white",rows:4,placeholder:"Share your thoughts...",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-white font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors",children:"Post Review"})]})]})}),e.jsx("div",{className:"space-y-6",children:i.length>0?i.map(t=>{const s=z(t.role,t.isVerified);return e.jsxs(d.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},className:`p-6 rounded-xl border transition-all ${s.containerStyle}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold uppercase ${s.avatarStyle}`,children:t.userName[0]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[t.userName,s.icon&&e.jsxs("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-full border flex items-center gap-1 ${s.badgeStyle}`,children:[e.jsx(s.icon,{size:10})," ",s.label]})]}),e.jsx("div",{className:"text-xs text-slate-500",children:new Date(t.date).toLocaleDateString()})]})]}),t.rating>0&&e.jsx("div",{className:"flex gap-0.5 text-yellow-400",children:Array.from({length:5}).map((j,o)=>e.jsx(x,{size:14,fill:o<t.rating?"currentColor":"none",className:o>=t.rating?"text-slate-300 dark:text-slate-700":""},o))})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 leading-relaxed text-sm",children:t.content})]},t.id)}):e.jsx("div",{className:"text-center py-12 text-slate-500 bg-slate-50 dark:bg-slate-950 rounded-xl border border-dashed border-slate-200 dark:border-slate-800",children:"No reviews yet. Be the first to review this item!"})})]})})]})]})]})};export{Z as default};
